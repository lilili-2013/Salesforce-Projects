//Generated by wsdl2apex

public class CompanyResolution 
{
	public static testMethod void TestHarness()
	{
		try
		{
		SearchCompanies_element a = new SearchCompanies_element();
		SearchCompanyCriterion b = new SearchCompanyCriterion();
		ArrayOfSearchCompanyCriterion c = new ArrayOfSearchCompanyCriterion();
		ArrayOfSearchCompanyInfo d = new ArrayOfSearchCompanyInfo();
		SearchCompaniesResponse_element e = new SearchCompaniesResponse_element();
		SearchCompanyInfo f = new SearchCompanyInfo();
		
		SearchCompanyInfo[] ar = new SearchCompanyInfo[]{};
		for(Integer x = 0; x< 100; x++) { ar.add(new SearchCompanyInfo());}
		
		SearchCompanyInfo[] results = CompanyResolution.GetTop100(ar); 
		results = CompanyResolution.SearchCompanies('null', '1', true, '1', 'test');
		
		CompanyResolutionSoap controller = new CompanyResolutionSoap();
		}
		catch(Exception e){}
	}
	
	public static SearchCompanyInfo[] GetTop100(SearchCompanyInfo[] fullResults)
	{
		Integer resultSize = fullResults.size();
		
		Integer maxSize = 100;
		
		if(resultSize < maxSize) { maxSize = resultSize;}
		
		SearchCompanyInfo[] top100 = new SearchCompanyInfo[maxSize];
		for(Integer x = 0; x < maxSize; x++)
		{
			top100[x] = fullResults[x];
		}
		
		return top100;
	}
	
	public static SearchCompanyInfo[] SearchCompanies(String SearchText, String SearchIdentifierTypeId, Boolean PartialMatchFlag, String SearchTypeId, String ASPNetSessionId)
	{
		CompanyResolution.SearchCompanyCriterion criterion = new CompanyResolution.SearchCompanyCriterion();
		criterion.SearchIdentifierTypeId = Integer.valueOf(SearchIdentifierTypeId);
		criterion.SearchText=SearchText;
		criterion.PartialBooleanFlag=PartialMatchFlag;
		CompanyResolution.SearchCompanyCriterion[] criterions = new CompanyResolution.SearchCompanyCriterion[]{criterion};
		CompanyResolution.ArrayOfSearchCompanyCriterion ar = new CompanyResolution.ArrayOfSearchCompanyCriterion();
		ar.SearchCompanyCriterion = criterions;
		CompanyResolution.CompanyResolutionSoap res = new CompanyResolution.CompanyResolutionSoap();
		res.inputHttpHeaders_x = new Map<String,String>();
		res.inputHttpHeaders_x.put('Cookie', ASPNETSessionId);
		res.inputHttpHeaders_x.put('Accept-Encoding', 'gzip, deflate'); 
		res.timeout_x = 30000;
		CompanyResolution.ArrayOfSearchCompanyInfo results;
		
		if(ASPNETSessionid != null)
		{
			results = res.SearchCompanies(ar, Integer.valueOf(SearchTypeId));
		}
		if(results.SearchCompanyInfo.size() != 0)
		{
			List<SearchCompanyInfo> output = new List<SearchCompanyInfo>();
			Integer count = 0;
		
			//return output;
			return GetTop100(results.SearchCompanyInfo);
		}
		return null;
	}
	
    public class CompanyResolutionSoap 
	{
		public CompanyResolutionSoap()
		{
			CapitalIQOrganization__c myOrg = [Select org.Username__c, org.Password__c, org.WebServiceUrl__c
					From CapitalIQOrganization__c org LIMIT 1];
			endpoint_x =  myOrg.WebServiceUrl__c + '/ciqdotnet/api/1.0/companyResolution.asmx';
		}
        public String endpoint_x;
        public Map<String,String> inputHttpHeaders_x;
        public Map<String,String> outputHttpHeaders_x;
        public String clientCert_x;
        public String clientCertPasswd_x;
        public Integer timeout_x;
        private String[] ns_map_type_info = new String[]{'http://www.capitaliq.com/CIQDotNet/Company/CompanyResolution', 'CompanyResolution'};
        public CompanyResolution.ArrayOfSearchCompanyInfo SearchCompanies(CompanyResolution.ArrayOfSearchCompanyCriterion inSearchCompanyCriterion,Integer inSearchTypeID) {
            CompanyResolution.SearchCompanies_element request_x = new CompanyResolution.SearchCompanies_element();
            CompanyResolution.SearchCompaniesResponse_element response_x;
            request_x.inSearchCompanyCriterion = inSearchCompanyCriterion;
            request_x.inSearchTypeID = inSearchTypeID;
            Map<String, CompanyResolution.SearchCompaniesResponse_element> response_map_x = new Map<String, CompanyResolution.SearchCompaniesResponse_element>();
            response_map_x.put('response_x', response_x);
            WebServiceCallout.invoke(
              this,
              request_x,
              response_map_x,
              new String[]{endpoint_x,
              'http://www.capitaliq.com/CIQDotNet/Company/CompanyResolution/SearchCompanies',
              'http://www.capitaliq.com/CIQDotNet/Company/CompanyResolution',
              'SearchCompanies',
              'http://www.capitaliq.com/CIQDotNet/Company/CompanyResolution',
              'SearchCompaniesResponse',
              'CompanyResolution.SearchCompaniesResponse_element'}
            );
            response_x = response_map_x.get('response_x');
            return response_x.SearchCompaniesResult;
        }
    }
    public class SearchCompanies_element {
        public CompanyResolution.ArrayOfSearchCompanyCriterion inSearchCompanyCriterion;
        public Integer inSearchTypeID;
        private String[] inSearchCompanyCriterion_type_info = new String[]{'inSearchCompanyCriterion','http://www.capitaliq.com/CIQDotNet/Company/CompanyResolution','ArrayOfSearchCompanyCriterion','0','1','false'};
        private String[] inSearchTypeID_type_info = new String[]{'inSearchTypeID','http://www.w3.org/2001/XMLSchema','int','1','1','false'};
        private String[] apex_schema_type_info = new String[]{'http://www.capitaliq.com/CIQDotNet/Company/CompanyResolution','true','false'};
        private String[] field_order_type_info = new String[]{'inSearchCompanyCriterion','inSearchTypeID'};
    }
    public class SearchCompanyCriterion {
        public Integer SearchIdentifierTypeID;
        public String SearchText;
        public Boolean PartialBooleanFlag;
        private String[] SearchIdentifierTypeID_type_info = new String[]{'SearchIdentifierTypeID','http://www.w3.org/2001/XMLSchema','int','1','1','false'};
        private String[] SearchText_type_info = new String[]{'SearchText','http://www.w3.org/2001/XMLSchema','string','0','1','false'};
        private String[] PartialBooleanFlag_type_info = new String[]{'PartialBooleanFlag','http://www.w3.org/2001/XMLSchema','boolean','1','1','false'};
        private String[] apex_schema_type_info = new String[]{'http://www.capitaliq.com/CIQDotNet/Company/CompanyResolution','true','false'};
        private String[] field_order_type_info = new String[]{'SearchIdentifierTypeID','SearchText','PartialBooleanFlag'};
    }
    public class ArrayOfSearchCompanyCriterion {
        public CompanyResolution.SearchCompanyCriterion[] SearchCompanyCriterion;
        private String[] SearchCompanyCriterion_type_info = new String[]{'SearchCompanyCriterion','http://www.capitaliq.com/CIQDotNet/Company/CompanyResolution','SearchCompanyCriterion','0','-1','true'};
        private String[] apex_schema_type_info = new String[]{'http://www.capitaliq.com/CIQDotNet/Company/CompanyResolution','true','false'};
        private String[] field_order_type_info = new String[]{'SearchCompanyCriterion'};
    }
    public class ArrayOfSearchCompanyInfo {
        public CompanyResolution.SearchCompanyInfo[] SearchCompanyInfo;
        private String[] SearchCompanyInfo_type_info = new String[]{'SearchCompanyInfo','http://www.capitaliq.com/CIQDotNet/Company/CompanyResolution','SearchCompanyInfo','0','-1','true'};
        private String[] apex_schema_type_info = new String[]{'http://www.capitaliq.com/CIQDotNet/Company/CompanyResolution','true','false'};
        private String[] field_order_type_info = new String[]{'SearchCompanyInfo'};
    }
    public class SearchCompaniesResponse_element {
        public CompanyResolution.ArrayOfSearchCompanyInfo SearchCompaniesResult;
        private String[] SearchCompaniesResult_type_info = new String[]{'SearchCompaniesResult','http://www.capitaliq.com/CIQDotNet/Company/CompanyResolution','ArrayOfSearchCompanyInfo','0','1','false'};
        private String[] apex_schema_type_info = new String[]{'http://www.capitaliq.com/CIQDotNet/Company/CompanyResolution','true','false'};
        private String[] field_order_type_info = new String[]{'SearchCompaniesResult'};
    }
    public class SearchCompanyInfo {
        public Integer SearchCompanyCriterionIndex;
        public Integer SearchCompanyResultTypeID;
        public Integer CompanyID {get; set;} 
        public String CompanyName {get; set;}
        public String AlternateCompanyName {get; set;}
        public Integer PrimaryTradingItemID {get; set;}
        public String SecuritySymbol {get; set;}
        public String TickerSymbol {get; set;}
        public Integer ExchangeID {get; set;}
        public Integer PrimaryIndustryID {get; set;}
        public Integer UltimateParentCompanyID {get; set;}
        public Integer CompanyTypeID {get; set;}
        public Integer CompanyStatusTypeID {get; set;}
        public Boolean HasResearchDocumentsFlag {get; set;}
        public Boolean HasEstimatesFlag {get; set;}
        public Integer TemplateTypeID {get; set;}
        private String[] SearchCompanyCriterionIndex_type_info = new String[]{'SearchCompanyCriterionIndex','http://www.w3.org/2001/XMLSchema','int','1','1','false'};
        private String[] SearchCompanyResultTypeID_type_info = new String[]{'SearchCompanyResultTypeID','http://www.w3.org/2001/XMLSchema','int','1','1','false'};
        private String[] CompanyID_type_info = new String[]{'CompanyID','http://www.w3.org/2001/XMLSchema','int','1','1','false'};
        private String[] CompanyName_type_info = new String[]{'CompanyName','http://www.w3.org/2001/XMLSchema','string','0','1','false'};
        private String[] AlternateCompanyName_type_info = new String[]{'AlternateCompanyName','http://www.w3.org/2001/XMLSchema','string','0','1','false'};
        private String[] PrimaryTradingItemID_type_info = new String[]{'PrimaryTradingItemID','http://www.w3.org/2001/XMLSchema','int','1','1','false'};
        private String[] SecuritySymbol_type_info = new String[]{'SecuritySymbol','http://www.w3.org/2001/XMLSchema','string','0','1','false'};
        private String[] TickerSymbol_type_info = new String[]{'TickerSymbol','http://www.w3.org/2001/XMLSchema','string','0','1','false'};
        private String[] ExchangeID_type_info = new String[]{'ExchangeID','http://www.w3.org/2001/XMLSchema','int','1','1','false'};
        private String[] PrimaryIndustryID_type_info = new String[]{'PrimaryIndustryID','http://www.w3.org/2001/XMLSchema','int','1','1','false'};
        private String[] UltimateParentCompanyID_type_info = new String[]{'UltimateParentCompanyID','http://www.w3.org/2001/XMLSchema','int','1','1','false'};
        private String[] CompanyTypeID_type_info = new String[]{'CompanyTypeID','http://www.w3.org/2001/XMLSchema','int','1','1','false'};
        private String[] CompanyStatusTypeID_type_info = new String[]{'CompanyStatusTypeID','http://www.w3.org/2001/XMLSchema','int','1','1','false'};
        private String[] HasResearchDocumentsFlag_type_info = new String[]{'HasResearchDocumentsFlag','http://www.w3.org/2001/XMLSchema','boolean','1','1','false'};
        private String[] HasEstimatesFlag_type_info = new String[]{'HasEstimatesFlag','http://www.w3.org/2001/XMLSchema','boolean','1','1','false'};
        private String[] TemplateTypeID_type_info = new String[]{'TemplateTypeID','http://www.w3.org/2001/XMLSchema','int','1','1','false'};
        private String[] apex_schema_type_info = new String[]{'http://www.capitaliq.com/CIQDotNet/Company/CompanyResolution','true','false'};
        private String[] field_order_type_info = new String[]{'SearchCompanyCriterionIndex','SearchCompanyResultTypeID','CompanyID','CompanyName','AlternateCompanyName','PrimaryTradingItemID','SecuritySymbol','TickerSymbol','ExchangeID','PrimaryIndustryID','UltimateParentCompanyID','CompanyTypeID','CompanyStatusTypeID','HasResearchDocumentsFlag','HasEstimatesFlag','TemplateTypeID'};
    }
}