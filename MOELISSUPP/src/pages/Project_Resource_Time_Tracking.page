<!-- modified: yuguziy 04/16/2010 - task: 10280 - can be deleted now  -->
<apex:page >
<!-- <apex:page controller="Project_Resource_Time_Tracking" id="thePage">
<apex:form id="af">

    <apex:stylesheet value="{!URLFOR($Resource.dirs_img_css, '/css/tracker.main.css')}"/>
    <apex:stylesheet value="{!URLFOR($Resource.dirs_img_css, '/css/jquery.kiketable.colsizable.css')}"/>
    <apex:stylesheet value="{!URLFOR($Resource.dirs_img_css, '/css/ui-lightness/jquery-ui-1.7.2.custom.css')}"/>

    <apex:includeScript value="{!URLFOR($Resource.dir_js, '/js/jquery-1.3.2.min.js')}"/>
    <apex:includeScript value="{!URLFOR($Resource.dir_js, '/js/jquery-ui-1.7.2.custom.min.js')}"/>
    <apex:includeScript value="{!URLFOR($Resource.dir_js, '/js/jquery.tracker.build.min.js')}"/>

    <style>
        th.header { 
            text-align:left;
            background-image: url({!URLFOR($Resource.dirs_img_css, '/img/bg.gif')});
            cursor: pointer; 
            font-weight: bold; 
            background-repeat: no-repeat; 
            background-position:right center ; 
            padding-left: 7px;
            margin-left: -1px;
            margin-right:20px;
        }       

        th.headerSortUp { 
            background-image: url({!URLFOR($Resource.dirs_img_css, '/img/asc.gif')}); 
            background-color: #e5e6e8; 
        }
        
        th.headerSortDown { 
            background-image: url({!URLFOR($Resource.dirs_img_css, '/img/desc.gif')}); 
            background-color: #e5e6e8; 
        }

        .leftTd {
            text-align : right ! important;
        }

        .centerTd {
            text-align : center ! important;
        }
        .hoursPadding {
            padding-right : 16px ! important;
        }
        div.ui-datepicker{
            font-size:11px;
        }       
    </style>

    <apex:outputPanel id="pSelForm" rendered="{!IF($CurrentPage.parameters.pid != '',false,true)}">
    <apex:pageBlock title="Project">
            <apex:pageBlockSection >
                <apex:pageBlockSectionItem >
                
                    <apex:outputLabel >Select Project:</apex:outputLabel>
                    <apex:selectList size="1" value="{!SelProjItem}" title="Select Project">
                        <apex:selectOption itemvalue="" itemLabel="...select..."/>
                        <apex:selectOptions value="{!projects}"></apex:selectOptions>
                        <apex:actionSupport action="{!selProject}" event="onchange"/>
                    </apex:selectList>
                </apex:pageBlockSectionItem>
            </apex:pageBlockSection>
    </apex:pageBlock>
    </apex:outputPanel>

   
    <apex:outputPanel id="trackerContainer">
                    <apex:actionstatus id="MCSub" startText="Processing...">
                <apex:facet name="start">
                    <div id="salesforceSource_blurybackground" style="position:absolute; left:1px; top:1px; width:100%; height:100%; text-align:center; vertical-align: middle; background-color: #dcdcdc; opacity:0.6;filter:alpha(opacity=60)"></div>
                    <div id="ManageMembersViewport_loading" class="waitingSearchDiv" style="width: 100%; height: 80%; display: ''; ">
                        <div style="width: 144px;vertical-align: middle;" class="waitingHolder">
                        <table align="center" valign="top" style="width: 100%; height: 30%">
                        <tr align="center" valign="top" style="width: 100%; height: 30%">
                            <td valign="top"><img class="waitingImage" src="/img/loading.gif"/><span class="waitingDescription">Processing......</span></td>
                        </tr>
                        </table>
                        </div>
                    </div>
                    <div id="ManageMembersViewport_loading" class="waitingSearchDiv" style="width: 100%; height: 100%; display: ''; "/>
                    <script>document.getElementById('ManageMembersViewport_loading').height = window.innerHeight * (3/4);</script>
                    
                    
                </apex:facet>
                <apex:facet name="stop"></apex:facet>
                </apex:actionstatus>
<apex:repeat value="{!TBListPanel}" id="mmm" var="cfadd" rows="1">

     
	<apex:actionFunction name="saveAndNew" action="{!save_and_new}" rerender="trackerContainer" status="MCSub" />
	<script>
	function saveNew()
	{
		if(MoelisEmployeeObj.value=='')
		{
			alert('Error: You must enter a value for Moelis Employee.');
			return false
		}
		saveJson();
		saveAndNew();
		return true;
		
	}
	</script>
        <apex:pageBlock title="Enter Time Tracking information for Deal {!CurrDealObj.Name}">
            <apex:pageBlockButtons >
                <apex:commandButton value="Save and New" onclick="return saveNew()" action="{!save_and_new}" rerender="trackerContainer" status="MCSub" />
            </apex:pageBlockButtons>

             <apex:pageBlockSection title="Deal Resource Time Tracking" columns="1">
                <apex:inputField required="false" id="MEmpl" value="{!PRTTObj.Moelis_Employee__c}"/>
           		<script>
					var MoelisEmployeeObj = document.getElementById("{!$Component.MEmpl}");
				</script>
                <apex:inputField value="{!PRTTObj.Date__c}"/>
                <apex:inputField value="{!PRTTObj.Hours__c}"/>
                <apex:inputField value="{!PRTTObj.Activity__c}"/>
            </apex:pageBlockSection>
        </apex:pageBlock>
        
        <apex:pageBlock id="afpb" title="Selected: {!CurrDealObj.Name}">
            <apex:pageBlockButtons >
                <apex:commandButton value="Save" onclick="saveJson()" action="{!saveJson}" rerender="trackerContainer" status="MCSub" />
                <apex:commandButton value="Cancel" action="{!cancel}" rerender="trackerContainer" status="MCSub" />
                <apex:commandButton value="Close" action="{!close}" />
            </apex:pageBlockButtons>

            <apex:pageBlockSection id="pbsJson">
                <apex:pageBlockSectionItem id="pbsiJson">
                    <div id="div-space"></div>
                    <apex:inputHidden value="{!jsonContent}" id="jsonContainer" />
                </apex:pageBlockSectionItem>
            </apex:pageBlockSection>
        </apex:pageBlock>
                
                    <script>
                          
                            var jsonTable;
                            
                            $(document).ready(
                                function ()
                                {
                                    $.getJSON('/apex/Project_Resource_Time_TrackingJSON?pid={!SelProjItem}',{},function (data, textStatus) {
                                        jsonTable = $.drawTable({
                                            debug : false,
                                            json : data,
                                            divPath : "#div-space",
                                            classes : {
                                                "header" : [],
                                                "table" : [
                                                    "",
                                                    "",
                                                    "",
                                                    "hoursPadding leftTd",
                                                    "",
                                                    "centerTd"
                                                ],
                                                "footer" : [
                                                     "",
                                                    "",
                                                    "",{
                                                        "td" : "leftTd hoursPadding",
                                                        "precission" : 2
                                                    },
                                                    "",
                                                    "centerTd"
                                                ]
                                            },
                                            styles : {
                                                colsWidth : [100, 240, 110, 110, 240,80]
                                            }
                                        });                                      
                                    });
                                }       
                            )
                            
                            function bb()
                            {
                                return false;
                            }
                            function showJson()
                            {
                                $('#json-textarea').html($.toJSON(jsonTable.model));
                            }

                            function saveJson()
                            {
                                try 
                                {
                                    //alert($.toJSON(jsonTable.model));
                                    document.getElementById('{!$Component.thePage.af.mmm.afpb.pbsJson.pbsiJson.jsonContainer}').value = $.toJSON(jsonTable.model);
                                }
                                catch(Exception){}
                                    
                                //alert(document.getElementById('{!$Component.thePage.af.mmm.afpb.pbsJson.pbsiJson.jsonContainer}').value);
                                //$('#json-textarea').html(document.getElementById('{!$Component.thePage.af.afpb.pbsJson.pbsiJson.jsonContainer}').value);
                                //alert(document.getElementById('{!$Component.thePage.af.afpb.pbsJson.pbsiJson.jsonContainer}').value);
                                //apexSaveJson();
                            }

                        </script>

</apex:repeat>
{!TestData}                        
    </apex:outputPanel>
</apex:form>

-->
</apex:page>