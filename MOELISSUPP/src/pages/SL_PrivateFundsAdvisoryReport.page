<apex:page controller="SL_PrivateFundsAdvisoryController" showHeader="false" renderAs="PDF" applyHtmlTag="false">
    <head>
        <style type="text/css">
            @page {
                size: A4 landscape;
                margin: .5cm;
                margin-bottom: 1.2cm;
                margin-top: 1.2cm;
    
                @bottom-right {
                    content: counter(page) " of " counter(pages);
                    font-size: 8pt;
                }
                
                @top-right {
                    content: "{!today}";
                    font-size: 8pt;
                }
            }
            
            body { font-size: 8pt; }
            
            .header { color: rgb(68, 105, 125); font-size: 12pt; }
            table { width: 100%; border-spacing: 0px 2px; -fs-table-paginate: paginate; }
            thead { display: table-header-group; page-break-inside: avoid; }
            thead a {
                color: rgb(68, 105, 125);
                text-decoration: none;
            }
            tr { page-break-inside: avoid; }
            td { vertical-align: top; }
            .data_row td
            {
                /*margin-top: -10px;*/
                padding-bottom: 10px;
                border-bottom: 1px solid black;
                font-size: 7pt;
            }
            .inner_table td{ padding-bottom: 0; border: none; }
            th { vertical-align: top; }
            .table_title { background-color: rgb(68, 105, 125); color: white; height: 18px; font-size: 10pt; }
            .inactive { background-color: #DCDCDC;}
            .spacer { font-size: 1pt;}
        </style>
    </head>
    <apex:pageMessages id="ErrorMessage" />
    <table cellpadding="0" >
        <THEAD>
             <tr>
                <th colspan="6" class="header">{!title}</th>
                <th colspan="2" align="right" valign="top"><apex:image id="logo" value="/servlet/servlet.FileDownload?file={!logoId}" rendered="{!renderLogo}"/></th>
             </tr> 
             <tr><td class="spacer" colspan="7">&nbsp;</td></tr>
             <tr class="table_title">
                <th style="width:15%">Investors</th>
                <th style="width:10%">Investor Type</th>
                <th style="width:9%">Interest Level</th>
                <th style="width:9%">Amount (mm)</th>
                <th style="width:8%">Manager</th>
                <th style="width:13%">Contacts</th>
                <th style="width:11%">Milestones</th> 
                <th style="">
                    <table style="width:99%;">
                        <tr>
                            <th>Date</th>
                            <th>Activity Logs</th>
                        </tr>
                    </table>
                </th>   
             </tr>
        </THEAD>
        <TBODY>
            <apex:outputText rendered="{!fetchPotentialBuyers.size==0}">
                <Span style="font-weight: bold;">No records to Display</Span>
            </apex:outputText>
            <apex:outputText rendered="{!fetchPotentialBuyers.size > 0}">
                <apex:repeat value="{!fetchPotentialBuyers}" var="item">
                    <tr class="data_row {!IF(item.isInactive,'inactive','')}">
                        <td><apex:outputText value="{!item.investors}" escape="false"/></td>
                        <td><apex:outputText value="{!item.investorType }" /></td>
                        <td><apex:outputText value="{!item.interestLevel}" /></td>
                        <td>
                            <apex:outputLabel value="Min = "/>
                            <apex:outputText value="${0,number,###,##0.00}" rendered="{!item.minAmount!=null}">
                              <apex:param value="{!item.minAmount}"/>
                            </apex:outputText><br/>
                            <apex:outputLabel value="Max = "/>
                            <apex:outputText value="${0,number,###,##0.00}" rendered="{!item.maxAmount!=null}">
                              <apex:param value="{!item.maxAmount}"/>
                            </apex:outputText><br/>
                            <apex:outputLabel value="Close = "/>
                            <apex:outputText value="${0,number,###,##0.00}" rendered="{!item.closeAmount!=null}">
                              <apex:param value="{!item.closeAmount}"/>
                            </apex:outputText>
                        </td>
                        <td><apex:outputText value="{!item.manager}" escape="false"/></td>
                        <td><apex:outputText value="{!item.contacts}" escape="false"/></td>
                        <td><apex:outputText value="{!item.milestones}" escape="false"/></td> 
                        <td>
                            <table class="inner_table" cellpadding="0" cellspacing="0" style="width:99%;">
                                <tr>
                                    <td style="width: 20%;"><apex:outputText value="Next Steps:" rendered="{!item.nextSteps!='' && item.nextSteps!=null}"/></td>
                                    <td><apex:outputText value="{!item.nextSteps}" rendered="{!item.nextSteps!='' && item.nextSteps!=null}" escape="false"/></td>
                                </tr>          
                                <apex:repeat value="{!item.activities}" var="a">
                                    <tr>
                                        <td style="width: 20%;"><apex:outputText value="{!a.strActivityDate}"/></td>
                                        <td ><apex:outputText value="{!a.description}" escape="false"/></td>
                                    </tr>
                                </apex:repeat>
                            </table>
                        </td>
                    </tr>
                </apex:repeat>
            </apex:outputText>
        </TBODY>
    </table>
</apex:page>