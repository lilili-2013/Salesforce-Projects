<apex:page Controller="PBI_AddMultiple" tabstyle="Ibanking_Project__c">
<apex:sectionHeader title="Potential Buyers/Investors Edit" subtitle="New Potential Buyers/Investors"/>




    <apex:stylesheet value="{!URLFOR($Resource.dirs_img_css, '/css/tracker.main.css')}"/>
    <apex:stylesheet value="{!URLFOR($Resource.dirs_img_css, '/css/jquery.kiketable.colsizable.css')}"/>
    <apex:stylesheet value="{!URLFOR($Resource.dirs_img_css, '/css/ui-lightness/jquery-ui-1.7.2.custom.css')}"/>
    <apex:stylesheet value="{!$Resource.multyedit}"/>











<apex:includeScript value="{!URLFOR($Resource.dir_js, '/js/jquery-1.3.2.min.js')}"/>
<apex:includeScript value="{!URLFOR($Resource.dir_js, '/js/jquery-ui-1.7.2.custom.min.js')}"/>
<apex:form id="af1">
<script> 
 function ToDelete()
 {
 	var toDelete = '';
 	var i = 0;
	$(".checkboxes").each(function () 
	{
		if(this.checked) toDelete += ':'+i;
		i++;
	});
	if (toDelete.length > 0 && toDelete.substring(0,1) == ':')	toDelete = toDelete.substring(1,toDelete.length);
	document.getElementById('{!$Component.deleteContainer}').value = toDelete;
	$(document.getElementById('{!$Component.btn_delete}')).click();
	
 }  
</script> 
<apex:inputHidden value="{!deleteContainer}" id="deleteContainer" /> 
<div style="display:none;"> <apex:commandButton value="Delete" action="{!ToDelete}" id="btn_delete" oncomplete="initPartyWidth();" reRender="Container"/></div>
</apex:form>
<apex:form id="af">
<apex:outputPanel id="Container" >
<script>
function changewidth()
{
/*
	var divSpaceW = parseInt(screen.width) - 350;
	var div_style = document.getElementById('div-space').style;
	div_style.width = divSpaceW+'px';

	var div_style2 = $('.centerTdPosition').style;
	var div_style4 = $('.centerTdPadding').style;
	if(!$.browser.msie || $.browser.version>7) 
	{
		div_style.position = 'absolute';
		div_style2.position = 'absolute';
		div_style4.padding = '0px 0px 0px 220px';
	}
	else 
	{
		div_style.position = 'relative';
		div_style2.position = 'relative';
		div_style4.padding = '0px 0px 0px 10px';
	}
	*/
}

function saveDateObj(inputObj)
{

		$(inputObj).datepicker({
                        debug: false,
                        dayNamesMin: ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'],
                        monthNamesShort: ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'],
                        changeYear: true,
                        changeMonth: true,
                        dateFormat: 'm/d/yy',
                        showOtherMonths: true,
                        selectOtherMonths: true,
                        showButtonPanel: true,
						beforeShow: function (input) {
                        },
                        onClose: function (dateText, inst) {
                            $this = $(this);
                            var newValue = $this.val();
                            if(newValue.length > 0) 
                            {
                            	var arrayDate = new Array();
                            	arrayDate = newValue.split('/',3); 
                            	//alert(arrayDate[0]+' '+arrayDate[1]+' '+arrayDate[2])
								if( arrayDate.length > 0 &&
									arrayDate[0] != undefined && arrayDate[1] != undefined && arrayDate[2] != undefined &&  
									arrayDate[0] != null && arrayDate[1] != null && arrayDate[2] != null && 
									arrayDate[2].length == 2) newValue = arrayDate[0]+'/'+arrayDate[1]+'/20'+arrayDate[2];
							}
                            $(inputObj).value = newValue;
                        }
                    })
                    .animate({
                    }, {
                        queue: true,
                        duration: 100,
                        complete: function () {
                            $(this).trigger("focus")
                        }
                    })
                    .bind("blur", function (e) {}).bind("keypress", function (event) {
                        var keynum;
                        if (jQuery.browser.msie) keynum = event.keyCode;
                        else keynum = event.which;
                        if (keynum == 13) {
                            $(this).triggerHandler("blur");
                            return false
                        }
                    })
      
     
}
</script>
<style>
 
.centerTd
{
	background-color:#FFFFFF;
	height: 37px;
}
.header
{
	padding-right:5px;
	background-color:#FFFFFF;
	height: 28px;
}
</style>
   <apex:pageBlock title="Potential Buyers/Investors" mode="edit" >
   
   <apex:pageBlockButtons >
				<apex:commandButton value="Save & Close" action="{!save_close}"/>
                <apex:commandButton value="Save" action="{!save}"/>
                <apex:commandButton value="New" action="{!AddNew}" reRender="Container" immediate="true" />
                
                <input class="btn" type="button" value="Delete" onclick="ToDelete();"/>
                <input class="btn" type="button" value="Cancel" onclick="location.href='/{!CurDealId}'" /> 
   </apex:pageBlockButtons>
   <apex:pageMessages id="error"/>

   <div id="div-space-top"  style="position:relative;">
   <div id="div-space" 
		style=" padding-bottom:12px;
				overflow:auto;
				overflow-y:hidden;
				border-right: solid 1px #d8d8d8;
				border-left: solid 1px #d8d8d8;">
<table cellspacing="0" style="background-color: white;">
<colgroup>
				 <col style="width: 250px;"/>
                 <col style="width: 160px;"/>
                 <col style="width: 80px;"/>
                 <col style="width: 85px;"/>
                 <col style="width: 85px;"/>
                 <col style="width: 85px;"/>
                 <col style="width: 85px;"/>
                 <col style="width: 85px;"/>
                 <col style="width: 120px;"/>
                 <col style="width: 120px;"/>
                 <col style="width: 140px;"/>
                 <col style="width: 125px;"/>
                 <col style="width: 85px;"/>
                 <col style="width: 120px;"/>
                 <col style="width: 85px;"/>
                 <col style="width: 140px;"/>
                 <col style="width: 140px;"/>
                 <col style="width: 120px;"/>
                 <col style="width: 90px;"/>
                 <col style="width: 140px;"/>
                 <col style="width: 140px;"/>
                 <col style="width: 130px;"/>
                 <col style="width: 90px;"/>
                 <col style="width: 140px;"/>
                 <col style="width: 140px;"/>
                 <col style="width: 85px;"/>
                 <col style="width: 90px;"/>
</colgroup>
<tbody>
	<tr>
		<th class="header centerTdPosition" 
			style=" 
					left: 1px; 
					background-color: white;
					border-right: solid 1px #d8d8d8;
					width: 30px ! important;">
					&nbsp;
		</th>
		<th class="header centerTdPosition" 
			style=" 
					width: 180px; 
					left: 30px; 
					background-color: white;
					border-right: solid 1px #d8d8d8;" >
			PBI_List
		</th>
		<th class="header centerTdPadding">Type</th>
		<th class="header">Status</th>
		<th class="header">Initial Contact Made</th>
		<th class="header">Teaser Sent</th>
		<th class="header">CA Sent</th>
		<th class="header">CA Under Negotiation</th>
		<th class="header">CA Signed</th>
		<th class="header">CIM/Info Package Sent</th>
		<th class="header">CIM/Info Package Returned</th>
		<th class="header">CIM Number</th>
		<th class="header">Management Presentation</th>
		<th class="header">Data Room Access</th>
		<th class="header">1st Round Bid Process Letter Sent </th>
		<th class="header">1st Round Bid Received </th>
		<th class="header">1st Round Bid High (mm) </th>
		<th class="header">1st Round Bid Low (mm) </th>
		<th class="header">2nd Round Bid Process Letter Sent </th>
		<th class="header">2nd Round Bid Received </th>
		<th class="header">2nd Round Bid High (mm) </th>
		<th class="header">2nd Round Bid Low (mm) </th>
		<th class="header">3rd Round Bid Process Letter Sent </th>
		<th class="header">3rd Round Bid Received </th>
		<th class="header">3rd Round Bid High (mm) </th>
		<th class="header">3rd Round Bid Low (mm)</th>
		<th class="header">Declined</th>
	</tr>
	<apex:repeat value="{!PBI_List}" var="pbi" >
		<tr>
			<td class="centerTd centerTdPosition" align="center" 
				style=" 
						left: 1px; 
						background-color: white;
						border: solid 0px white;
						width: 30px ! important;">
				<input type="checkbox" class="checkboxes" />
			</td>
			<td class="centerTd centerTdPosition" 
				style="  
						width: 184px; 
						left: 30px; 
						background-color: white;
						border-left: solid 0px white;
						border-right: solid 1px #d8d8d8;">
				<apex:inputField value="{!pbi.TargetBuyer__c}"/>
			</td>
			<td class="centerTd centerTdPadding"><apex:inputField value="{!pbi.Type__c}"/></td>
			<td class="centerTd" ><apex:inputField value="{!pbi.Status__c}"/></td>
			<td class="centerTd" ><apex:inputField value="{!pbi.Initial_Contact_Made__c}"/></td>
			<td class="centerTd" ><apex:inputField value="{!pbi.Teaser_Sent__c}"/></td>
			<td class="centerTd" ><apex:inputField value="{!pbi.CA_Sent__c}"/></td>
			<td class="centerTd" ><apex:inputField value="{!pbi.CA_Under_Negotiation__c}"/></td>
			<td class="centerTd" ><apex:inputField value="{!pbi.CA_Signed__c}"/></td>
			<td class="centerTd" ><apex:inputField value="{!pbi.CIM_Info_Package_Sent__c}"/></td>
			<td class="centerTd" ><apex:inputField value="{!pbi.CIM_Number__c}"/></td>
			<td class="centerTd" ><apex:inputField value="{!pbi.Mgmt_Presentation__c}"/></td>
			<td class="centerTd" ><apex:inputField value="{!pbi.Data_Room_Access__c}"/></td>
			<td class="centerTd" ><apex:inputField value="{!pbi.X1st_Round_Bid_Process_Letter_Sent__c}"/></td>
			<td class="centerTd" ><apex:inputField value="{!pbi.X1st_Round_Bid_Received__c}"/></td>
			<td class="centerTd" ><apex:inputField value="{!pbi.X2nd_Round_Bid_High_mm__c}"/></td>
			<td class="centerTd" ><apex:inputField value="{!pbi.X1st_Round_Bid_Low_mm__c}"/></td>
			<td class="centerTd" ><apex:inputField value="{!pbi.X2nd_Round_Bid_Process_Letter_Sent__c}"/></td>
			<td class="centerTd" ><apex:inputField value="{!pbi.X2nd_Round_Bid_Received__c}"/></td>
			<td class="centerTd" ><apex:inputField value="{!pbi.X2nd_Round_Bid_High_mm__c}"/></td>
			<td class="centerTd" ><apex:inputField value="{!pbi.X2nd_Round_Bid_Low_mm__c}"/></td>
			<td class="centerTd" ><apex:inputField value="{!pbi.X3rd_Round_Bid_Process_Letter_Sent__c}"/></td>
			<td class="centerTd" ><apex:inputField value="{!pbi.X3rd_Round_Bid_Received__c}"/></td>
			<td class="centerTd" ><apex:inputField value="{!pbi.X3rd_Round_Bid_High_mm__c}"/></td>
			<td class="centerTd" ><apex:inputField value="{!pbi.X3rd_Round_Bid_Low_mm__c}"/></td>
			<td class="centerTd" ><apex:inputField value="{!pbi.Declined__c}"/></td>
			<!-- 
			<td class="centerTd" >
			<apex:inputText id="Declined" onfocus="saveDateObj(this);" value="{!pbi.Declined__c}"/>
			<script>
			var tmp = document.getElementById('{!$Component.Declined}');
			saveDateObj(tmp);
			</script>
			
			</td>
			-->
		</tr>
	</apex:repeat>
</tbody>
</table>
</div>
</div>
<script>changewidth();</script>
   </apex:pageBlock>
</apex:outputPanel>
   </apex:form>
</apex:page>