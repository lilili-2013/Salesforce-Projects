<apex:page doctype="HTML-5.0" html-class="home" showHeader="false" sidebar="false" standardStylesheets="false" controller="SL_AgentHomePageController" action="{!pageAction}">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" charset="utf-8"/>
    <style>
        button.hidden { display: none; }
        .message{ display: none; }
        .messageCell{ width: 80%; }
        .searchComponent {
            display:inline-block;
            width:27%;
            margin-right:0px;
            margin-left:0px;
            text-align: center;
        }

        input.agentButton, button.agentButton{
            font-family: Arial, Helvetica, sans-serif;
            margin-left: 45%;
            margin-top: 5px;
            margin-bottom: 5px;
        }

        .searchComponent.first{
            width: 17%;
            margin-right: 1.5%;
            margin-left: 6.5%;
        }

        .displayInlineBlock{
            display:inline-block;
        }

        .innerSearchComponent{
            width:62%;
        }

        .searchLabel{
            margin-left:5px;
        }

        input.searchInput {
            width:92%;
            padding: 0.45em 0.5em 0.45em 0.5em;
        }

        input.searchInput.first {
            width: 70%;
        }

        select.searchInput {
            width: 100%;
        }

        .mobileLabel {
            margin-right: 5px;
            margin-bottom: 0;
            width:25%;
        }

        .mobileDropdown {
            position:relative;
            display:inline-block;
            top: 5px;
        }

        input.mobileInput {
            width:75%;
            margin-left:5px;
        }

        input.mobileSearchBtn {
            margin-left: 40%;
        }

        .logicSelect {
            width: 65px;
            font-size: 12px;
        }

        .mobileLogicSelect {
            margin-bottom: 0;
            margin-left: 6px;
        }

        select.mobileSearchInput {
            width: 79%;
        }

        button.agentButtonMobile {
            display:none;
        }

        .name-searches {
            margin-left: 11%;
        }

        .address-searches {
            text-align: center;
        }

        .id-searches {
            margin-left: 9%;
        }

        .search-block {
            display: block;
            width: 100%;
        }

        .forced-or-logic{
            text-align: center;
            width: 57px;
        }

        .mobile-policy-container .forced-or-logic-mobile{
            display:block;
            margin-left:40%;
            margin-bottom: 0;
        }

        .fa.fa-sort{
            color:grey;
        }

        @media screen and (max-width: 842px) {
            button.agentButtonMobile {
                display:block;
            }
        }

        @media (max-width: 767px) {
            body{
                padding-right: 0px;
                padding-left: 0px;
            }
        }
        
        th:hover,li > h3:hover
        {
            cursor: pointer;
            background-color:#ededeb;
        }
    </style>

    <script type="text/javascript">
        $(document).ready(function(){
            if('{!isError}' == 'true')
            {
                $('.main-navClass').hide();
                $('#mobile-button').hide();
            }

            if(GetURLParameter('moremembers')){
                $('#membersShowMoreDesktop').trigger('click');
                // showMore("{!lstMembersSearched.size}", 'mem', 'members');
            }

            if(GetURLParameter('morememBalances')){
                jQuery('#memBalancesShowMoreDesktop').trigger('click');
                // showMore({!lstMembersWithPastDueBalances.size}, 'memBalance', 'memBalances');
            }

            if(GetURLParameter('moreclaim')){
                jQuery('#claimsShowMoreDesktop').trigger('click');
                // showMore({!lstMemberClaims.size}, 'memClaim', 'claim');
            }
        });

        function GetURLParameter(sParam){
            var sPageURL = window.location.search.substring(1);
            var sURLVariables = sPageURL.split('&');

            for (var i = 0; i < sURLVariables.length; i++){

                var sParameterName = sURLVariables[i].split('=');
                if (sParameterName[0] == sParam){
                    return sParameterName[1];
                }
            }
        }

        
        // size = num rows to change total
        // rowClass = class on rows to show, not including number or '.'
        // buttonClassPrefix = class on button clicked, not including 'More' and 'Less'
        function showMore(size, rowClass, buttonClassPrefix){

            if(size > 7){

                for (var i = 8; i <= size; i++) {
                    $('.'+rowClass + i).show();
                }

                $(buttonClassPrefix+'ShowMore').hide();
                $(buttonClassPrefix+'ShowLess').show();

                addMoreParam('more'+buttonClassPrefix);
            }
        }

        // size = num rows to change total
        // rowClass = class on rows to show, not including number or '.'
        // buttonClassPrefix = class on button clicked, not including 'ShowMore' and 'ShowLess'
        function showLess(size, rowClass, buttonClassPrefix){
            if(size > 7){

                for(var i = 8; i <= size; i++) {
                    $('.'+rowClass + i).hide();
                }

                $(buttonClassPrefix+'ShowMore').show();
                $(buttonClassPrefix+'ShowLess').hide();

                removeMoreParam('more'+buttonClassPrefix);
            }
        }
        function setSortParam(strTableName,strFieldName)
        {
            sortTableAF(strTableName,strFieldName);
        }
    </script>

    <apex:composition template="SL_SiteTemplate">
        <apex:define name="mainSection">
            <!-- Main Content -->
            <div id="main-content" class="span12"  style="display:{!If(isError == true, 'none', '')};">

                <h1 class="welcome">Welcome</h1>
                <h2 class="welcome-message">to the Broker View of the PURE member portal.</h2>
                <hr />
                <apex:form >
                    <apex:actionFunction action="{!sortPageSections}" name="sortTableAF" rerender="dummy">
                        <apex:param name="param1" assignto="{!strSortTable}" value=""/>
                        <apex:param name="param2" assignto="{!strSortColumn}" value=""/> 
                    </apex:actionFunction>
                    <apex:outputpanel id="dummy"/>
                    <apex:actionFunction action="{!addMoreParam}" name="addMoreParam" rerender="dummy2">
                        <apex:param name="param1" assignto="{!moreParamName}" value=""/>
                    </apex:actionFunction>
                    <apex:outputpanel id="dummy2"/>
                    <apex:actionFunction action="{!removeMoreParam}" name="removeMoreParam" rerender="dummy3">
                        <apex:param name="param1" assignto="{!moreParamName}" value=""/>
                    </apex:actionFunction>
                    <apex:outputpanel id="dummy3"/>
                <div class="default-full-table row-fluid">
                    <div class="span12">
                        <div class="table-header arrow-container">
                            <h1 >Member Search</h1>
                            <p>Use the search tool below to locate a specific client or a segment of your clients (for example, those in a specific city or zip code).</p>
                            <div class="rotate-caret mobile"><i class="fa fa-caret-right fa-2x"></i></div>
                        </div>
                        <apex:actionRegion >
                            <!-- Mobile Search-->
                            <div class="mobile-expandable-div policies-mobile">
                                <div class="mobile-policy-container">

                                    <div class="search-block">
                                        <p class="mobileLabel">First Name</p>
                                        <apex:input styleClass="mobileInput" value="{!firstNameSearch}" html-placeholder="First Name"/>

                                        <apex:selectList styleClass="logicSelect mobileLogicSelect" id="lastNameLogicMobile" value="{!lastNameLogic}" size="1">
                                            <apex:selectOption itemLabel="---" itemValue="---"/>
                                            <apex:selectOption itemLabel="AND" itemValue="AND"/>
                                            <apex:selectOption itemLabel="OR" itemValue="OR"/>
                                        </apex:selectList>
                                        <p class="mobileLabel">Last Name</p>
                                        <apex:input styleClass="mobileInput" value="{!lastNameSearch}" html-placeholder="Last Name"/>
                                    </div>

                                    <div class="search-block">
                                        <p class="forced-or-logic-mobile">OR</p>
                                        <p class="mobileLabel">City</p>
                                        <apex:input styleClass="mobileInput" value="{!citySearch}" html-placeholder="City"/>

                                        <apex:selectList styleClass="logicSelect mobileLogicSelect" id="stateLogicMobile" value="{!stateLogic}" size="1">
                                            <apex:selectOption itemLabel="---" itemValue="---"/>
                                            <apex:selectOption itemLabel="AND" itemValue="AND"/>
                                            <apex:selectOption itemLabel="OR" itemValue="OR"/>
                                        </apex:selectList>
                                        <p class="mobileLabel">State</p>
                                        <!-- <apex:input styleClass="mobileInput" value="{!stateSearch}" html-placeholder="State" html-maxlength="2"/> -->
                                        <apex:selectList styleClass="mobileSearchInput" value="{!stateSearch}" size="1">
                                            <apex:selectOptions value="{!stateList}"/>
                                        </apex:selectList>

                                        <apex:selectList styleClass="logicSelect mobileLogicSelect" id="zipCodeLogicMobile" value="{!zipCodeLogic}" size="1">
                                            <apex:selectOption itemLabel="---" itemValue="---"/>
                                            <apex:selectOption itemLabel="AND" itemValue="AND"/>
                                            <apex:selectOption itemLabel="OR" itemValue="OR"/>
                                        </apex:selectList>
                                        <p class="mobileLabel">Zip Code</p>
                                        <apex:input styleClass="mobileInput" value="{!zipCodeSearch}" html-placeholder="First Name"/>
                                    </div>

                                    <div class="search-block">
                                        <p class="forced-or-logic-mobile">OR</p>
                                        <p class="mobileLabel">Member ID</p>
                                        <apex:input styleClass="mobileInput" value="{!memberIdSearch}" html-placeholder="Member ID"/>

                                        <apex:selectList styleClass="logicSelect mobileLogicSelect" id="policyLogicMobile" value="{!policyLogic}" size="1">
                                            <apex:selectOption itemLabel="---" itemValue="---"/>
                                            <apex:selectOption itemLabel="AND" itemValue="AND"/>
                                            <apex:selectOption itemLabel="OR" itemValue="OR"/>
                                        </apex:selectList>
                                        <p class="mobileLabel">Policy Number</p>
                                        <apex:input styleClass="mobileInput" value="{!policySearch}" html-placeholder="Policy #"/>
                                    </div>

                                    <apex:commandButton styleClass="btn-pure mobile mobileSearchBtn agentButton" action="{!searchMembers}" value="Search"></apex:commandButton>
                                </div>
                            </div>
                            <!-- End Mobile Search -->
                            <!-- Desktop Search-->
                            <div class="policies-desktop">
                                <div class="name-searches search-block">
                                    <div class="searchComponent first">
                                        <label for="firstName" class="searchLabel first">First Name</label>
                                        <apex:input styleClass="searchInput" value="{!firstNameSearch}" html-placeholder="First Name"/>
                                    </div>

                                    <div class="searchComponent">
                                        <div class="displayInlineBlock">
                                            <apex:selectList styleClass="logicSelect" id="lastNameLogic" value="{!lastNameLogic}" size="1">
                                                <apex:selectOption itemLabel="---" itemValue="---"/>
                                                <apex:selectOption itemLabel="AND" itemValue="AND"/>
                                                <apex:selectOption itemLabel="OR" itemValue="OR"/>
                                            </apex:selectList>
                                        </div>
                                        <div class="innerSearchComponent displayInlineBlock">
                                            <label for="lastName" class="searchLabel">Last Name</label>
                                            <apex:input styleClass="searchInput" value="{!lastNameSearch}" html-placeholder="Last Name"/>
                                        </div>
                                    </div>
                                </div>

                                <div class="address-searches search-block">
                                    <div class="searchComponent">
                                        <div class="displayInlineBlock">
                                            <p class="forced-or-logic">OR</p>
                                        </div>
                                        <div class="innerSearchComponent displayInlineBlock">
                                            <label for="city" class="searchLabel">City</label>
                                            <apex:input styleClass="searchInput" value="{!citySearch}" html-placeholder="City"/>
                                        </div>
                                    </div>
                                    <div class="searchComponent">
                                        <div class="displayInlineBlock">
                                            <apex:selectList styleClass="logicSelect" id="stateLogic" value="{!stateLogic}" size="1">
                                                <apex:selectOption itemLabel="---" itemValue="---"/>
                                                <apex:selectOption itemLabel="AND" itemValue="AND"/>
                                                <apex:selectOption itemLabel="OR" itemValue="OR"/>
                                            </apex:selectList>
                                        </div>
                                        <div class="innerSearchComponent displayInlineBlock">
                                            <label for="state" class="searchLabel">State</label>
                                            <apex:selectList styleClass="searchInput" value="{!stateSearch}" size="1">
                                                <apex:selectOptions value="{!stateList}"/>
                                            </apex:selectList>
                                        </div>
                                    </div>

                                    <div class="searchComponent">
                                        <div class="displayInlineBlock">
                                            <apex:selectList styleClass="logicSelect" id="zipCodeLogic" value="{!zipCodeLogic}" size="1">
                                                <apex:selectOption itemLabel="---" itemValue="---"/>
                                                <apex:selectOption itemLabel="AND" itemValue="AND"/>
                                                <apex:selectOption itemLabel="OR" itemValue="OR"/>
                                            </apex:selectList>
                                        </div>
                                        <div class="innerSearchComponent displayInlineBlock">
                                            <label for="zipCode" class="searchLabel">Zip Code</label>
                                            <apex:input styleClass="searchInput" value="{!zipCodeSearch}" html-placeholder="Zip Code"/>
                                        </div>
                                    </div>
                                </div>

                                <div class="id-searches search-block">
                                    <div class="searchComponent">
                                        <div class="displayInlineBlock">
                                            <p class="forced-or-logic">OR</p>
                                        </div>
                                        <div class="innerSearchComponent displayInlineBlock">
                                            <label for="memberID" class="searchLabel">Member ID</label>
                                            <apex:input styleClass="searchInput" value="{!memberIDSearch}" html-placeholder="Member ID"/>
                                        </div>
                                    </div>

                                    <div class="searchComponent">
                                        <div class="displayInlineBlock">
                                            <apex:selectList styleClass="logicSelect" id="policyLogic" value="{!policyLogic}" size="1">
                                                <apex:selectOption itemLabel="---" itemValue="---"/>
                                                <apex:selectOption itemLabel="AND" itemValue="AND"/>
                                                <apex:selectOption itemLabel="OR" itemValue="OR"/>
                                            </apex:selectList>
                                        </div>
                                        <div class="innerSearchComponent displayInlineBlock">
                                            <label for="policyNumber" class="searchLabel">Policy Number</label>
                                            <apex:input styleClass="searchInput" value="{!policySearch}" html-placeholder="Policy #"/>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <apex:commandButton styleClass="btn-pure desktop agentButton" style="margin-left:45%" action="{!searchMembers}" value="Search"></apex:commandButton>
                            <!-- End Desktop Search -->
                        </apex:actionRegion>
                    </div>
                </div>

                <!-- Searched members fill in table below. If none, hide. -->
                <div class="default-full-table row-fluid" style="display:{!If(lstMembersSearched.empty &&numMembersReturned < 0, 'none', '')};" id="topSearchResults">
                    <div class="span12">        
                        <div class="table-header arrow-container">
                            <h1 id="MemberSearchResults">Member Search Results</h1>
                            <div class="rotate-caret mobile"><i class="fa fa-caret-right fa-2x"></i></div>
                        </div>
                        <!-- MOBILE - member search results-->
                        <div class="mobile-expandable-div policies-mobile">
                            <apex:outputpanel rendered="{!If(numMembersReturned == 0, true, false)}">
                                <div class="mobile-policy-container">
                                    <ul><li><span class="text-error">Unfortunately, no members could be found with the criteria entered above.  Please modify your search and try again.</span></li></ul>
                                </div>
                            </apex:outputpanel>
                            <apex:outputpanel rendered="{!If(numMembersReturned > 0, true, false)}">
                                <apex:repeat value="{!lstMembersSearched}" var="mem">
                                    <div class="mobile-policy-container mem{!mem.memberIndex}" style="display:{!IF(mem.memberIndex>7, 'none', '')}">
                                        <ul>
                                            <li class="Lgray">
                                                <h3 id="{!mem.memId}_MemberSearchResults_Name" onclick="setSortParam('MemberSearchResults','Name');">MEMBER NAME <i class="fa fa-sort"></i></h3>
                                                <p>
                                                    <apex:commandLink action="{!navigateToMember}" value="{!mem.name}">
                                                        <apex:param name="mId" value="{!mem.memId}"/>
                                                    </apex:commandLink>
                                                </p>
                                            </li>
                                            <li class="Dgray" >
                                                <h3 id="{!mem.memId}_MemberSearchResults_Member_Key_EDW__c" onclick="setSortParam('MemberSearchResults','Member_Key_EDW__c');">MEMBER ID <i class="fa fa-sort"></i></h3>
                                                <p>
                                                    <apex:commandLink action="{!navigateToMember}" value="{!mem.memberKeyEDW}">
                                                        <apex:param name="mId" value="{!mem.memId}"/>
                                                    </apex:commandLink>
                                                </p>
                                            </li>               
                                            <li class="Lgray">
                                                <h3 id="{!mem.memId}_MemberSearchResults_ShippingCity" onclick="setSortParam('MemberSearchResults','ShippingCity');"> MAILING CITY <i class="fa fa-sort"></i></h3>
                                                <p>
                                                    {!mem.shippingCity}
                                                </p>
                                            </li>
                                            <li class="Dgray">
                                                <h3 id="{!mem.memId}_MemberSearchResults_ShippingState" onclick="setSortParam('MemberSearchResults','ShippingState');">MAILING STATE <i class="fa fa-sort"></i></h3>
                                                <p>
                                                    {!mem.shippingState}
                                                </p>
                                            </li>
                                            <li class="Lgray">
                                                <h3 id="{!mem.memId}_MemberSearchResults_Broker__r_Broker_Id__c" onclick="setSortParam('MemberSearchResults','Broker__r.Broker_Id__c');">ASSOCIATED BROKER ID <i class="fa fa-sort"></i></h3>
                                                <p>{!mem.brokerID}</p>
                                            </li>
                                        </ul>
                                    </div>  
                                    <script>
                                        if('{!strSearchResTable}' == 'MemberSearchResults')
                                        {
                                            var mobilecolumnName = '{!mem.memId}_'+ '{!strSearchResTable}' + '_' + '{!strSearchSortColumn}';
                                            mobilecolumnName = mobilecolumnName.replace('.','_');
                                            $('#' + mobilecolumnName).children('i').first().replaceWith('<i class="{!IF(strSearchSortDir == 'ASC','fa fa-sort-desc','fa fa-sort-asc')}"/>');
                                        }   
                                   </script>
                                </apex:repeat>
                            </apex:outputpanel>
                            <button id="membersShowMoreMobile" type="button" class="btn-pure agentButtonMobile show-more agentButton membersShowMore" style="display:{!If(lstMembersSearched.size <= 7, 'none', '')}" onclick="showMore({!lstMembersSearched.size}, 'mem', 'members')">Show More</button>
                            <button type="button" class="btn-pure agentButtonMobile show-less hidden agentButton membersShowLess" onclick="showLess({!lstMembersSearched.size}, 'mem', 'members')" >Show Less</button>
                        </div>
                        <!-- END: Mobile member search results -->

                        <apex:outputpanel rendered="{!If(numMembersReturned == 0,true,false)}">
                            <table class="table policies-desktop table-striped">
                                <tr style="width:100%;">
                                    <td class="center-icon" colspan="5" style="width:100%;">
                                        <span class="text-error">Unfortunately, no members could be found with the criteria entered above.  Please modify your search and try again.</span>
                                    </td>
                                </tr>
                            </table>
                        </apex:outputpanel>
                        <!-- DESKTOP - member search results table -->
                        <apex:outputpanel rendered="{!If(numMembersReturned > 0,true,false)}">
                            <table class="table policies-desktop table-striped">
                                <thead>
                                    <tr>
                                        <th class="description" id="MemberSearchResults_Name" onclick="setSortParam('MemberSearchResults','Name');">MEMBER NAME <i class="fa fa-sort"></i></th>
                                        <th class="number" id="MemberSearchResults_Member_Key_EDW__c" onclick="setSortParam('MemberSearchResults','Member_Key_EDW__c');">MEMBER ID <i class="fa fa-sort"></i></th>
                                        <th class="period" id="MemberSearchResults_ShippingCity" onclick="setSortParam('MemberSearchResults','ShippingCity');">MAILING CITY <i class="fa fa-sort"></i></th>
                                        <th class="period" id="MemberSearchResults_ShippingState" onclick="setSortParam('MemberSearchResults','ShippingState');">MAILING STATE <i class="fa fa-sort"></i></th>
                                        <th class="number" id="MemberSearchResults_Broker__r_Broker_Id__c" onclick="setSortParam('MemberSearchResults','Broker__r.Broker_Id__c');" style="width:21%">ASSOCIATED BROKER ID <i class="fa fa-sort"></i></th>
                                    </tr>
                                    <script>
                                        if('{!strSearchResTable}' == 'MemberSearchResults')
                                        {
                                            var columnName = '{!strSearchResTable}' + '_' + '{!strSearchSortColumn}';
                                            columnName = columnName.replace('.','_');
                                            $('#' + columnName).children('i').first().replaceWith('<i class="{!IF(strSearchSortDir == 'ASC','fa fa-sort-desc','fa fa-sort-asc')}"/>');
                                        }   
                                   </script>
                                </thead>
                                <tbody>
                                    <apex:repeat value="{!lstMembersSearched}" var="mem">  
                                    <tr class="mem{!mem.memberIndex}" style="display:{!IF(mem.memberIndex>7, 'none', '')}">
                                        <td class="active-policy-icon-column">
                                            <div style="width:95%;">
                                                <apex:commandLink action="{!navigateToMember}" value="{!mem.Name}">
                                                    <apex:param name="mId" value="{!mem.memId}"/>
                                                </apex:commandLink>
                                            </div>
                                        </td>
                                        <td>
                                            <apex:commandLink action="{!navigateToMember}" value="{!mem.memberKeyEDW}">
                                                <apex:param name="mId" value="{!mem.memId}"/>
                                            </apex:commandLink>
                                        </td>
                                        <td>
                                            <span>{!mem.shippingCity}</span>
                                        </td>
                                        <td>
                                            <span>{!mem.shippingState}</span>
                                        </td>
                                        <td>
                                            <span>{!mem.brokerID}</span>
                                        </td>
                                    </tr>
                                    </apex:repeat>
                                </tbody>
                            </table>
                        </apex:outputpanel>
                        <button id="membersShowMoreDesktop" type="button" class="btn-pure desktop show-more agentButton membersShowMore" style="display:{!If(lstMembersSearched.size <= 7, 'none', '')}" onclick="showMore({!lstMembersSearched.size}, 'mem', 'members')">Show More</button>
                        <button type="button" class="btn-pure desktop show-less hidden agentButton membersShowLess" onclick="showLess({!lstMembersSearched.size}, 'mem', 'members')" >Show Less</button>
                    </div>
                </div>
                <!-- End member search results fill in table above. If none, hide. -->

                <!-- Recently viewed members fill in table below. If none, hide. -->
                <div class="default-full-table row-fluid" id="topPolicy">
                    <div class="span12">        
                        <div class="table-header arrow-container">
                            <h1 id="RecentlyViewedMembers">Recently Viewed Members</h1>
                            <div class="rotate-caret mobile"><i class="fa fa-caret-right fa-2x"></i></div>
                        </div>
                        <!-- DESKTOP - recently viewed members table -->
                        <apex:outputpanel rendered="{!If((lstRecentMembers.size>0),false,true)}">
                            <table class="table policies-desktop table-striped">
                                <tr style="width:100%;">
                                    <td class="center-icon" colspan="5" style="width:100%;">
                                        You haven't viewed any Members recently.
                                    </td>
                                </tr>
                            </table>
                        </apex:outputpanel>
                        <apex:outputpanel rendered="{!If((lstRecentMembers.size>0),true,false)}">
                            <table class="table policies-desktop table-striped">
                                <thead>
                                    <tr>
                                        <th class="description" id="RecentlyViewedMembers_Name" onclick="setSortParam('RecentlyViewedMembers','Name');">MEMBER NAME <i class="fa fa-sort"></i></th>
                                        <th class="number" id="RecentlyViewedMembers_Member_Key_EDW__c" onclick="setSortParam('RecentlyViewedMembers','Member_Key_EDW__c');">MEMBER ID <i class="fa fa-sort"></i></th>
                                        <th class="period" id="RecentlyViewedMembers_ShippingCity" onclick="setSortParam('RecentlyViewedMembers','ShippingCity');">MAILING CITY <i class="fa fa-sort"></i></th>
                                        <th class="period" id="RecentlyViewedMembers_ShippingState" onclick="setSortParam('RecentlyViewedMembers','ShippingState');">MAILING STATE <i class="fa fa-sort"></i></th>
                                        <th class="number" id="RecentlyViewedMembers_Broker__r_Broker_Id__c" onclick="setSortParam('RecentlyViewedMembers','Broker__r.Broker_Id__c');" style="width:21%;">ASSOCIATED BROKER ID <i class="fa fa-sort"></i></th>
                                    </tr>
                                    <script>
                                    if('{!strRecentlyViewedTable}' == 'RecentlyViewedMembers')
                                    {
                                        var columnName = '{!strRecentlyViewedTable}' + '_' + '{!strRecentlyViewedSortColumn}';
                                        columnName = columnName.replace('.','_');
                                        $('#' + columnName).children('i').first().replaceWith('<i class="{!IF(strRecentlyViewedSortDir == 'ASC','fa fa-sort-desc','fa fa-sort-asc')}"/>');
                                    }   
                                </script>
                                </thead>
                                <tbody>
                                    <apex:repeat value="{!lstRecentMembers}" rows="5" var="mem">
                                    <tr>
                                        <td class="active-policy-icon-column">
                                            <div style="width:95%;">
                                                <apex:commandLink action="{!navigateToMember}" value="{!mem.acc.Name}">
                                                    <apex:param name="mId" value="{!mem.acc.Id}"/>
                                                </apex:commandLink>
                                            </div>
                                        </td>
                                        <td>
                                            <apex:commandLink action="{!navigateToMember}" value="{!mem.acc.Member_Key_EDW__c}">
                                                <apex:param name="mId" value="{!mem.acc.Id}"/>
                                            </apex:commandLink>
                                        </td>
                                        <td>
                                            {!mem.acc.ShippingCity}
                                        </td>
                                        <td>
                                            {!mem.acc.ShippingState}
                                        </td>
                                        <td>
                                            {!mem.acc.Broker__r.Broker_ID__c}
                                        </td>
                                    </tr>
                                    </apex:repeat>
                                </tbody>
                            </table>
                        </apex:outputpanel>
                        <!-- MOBILE - recently viewed members-->
                        <div class="mobile-expandable-div policies-mobile">
                            <apex:outputpanel rendered="{!If((lstRecentMembers.size>0),false,true)}">
                                <div class="mobile-policy-container">
                                    <ul>
                                        <li>
                                            You haven't viewed any Members recently.
                                        </li>
                                    </ul>
                                </div>
                            </apex:outputpanel>
                            <apex:outputpanel rendered="{!If((lstRecentMembers.size>0),true,false)}">
                                <apex:repeat value="{!lstRecentMembers}" rows="5" var="mem">
                                    <div class="mobile-policy-container">
                                        <ul>
                                            <li class="Lgray">
                                                <h3 id="{!mem.acc.Id}_RecentlyViewedMembers_Name" onclick="setSortParam('RecentlyViewedMembers','Name');">MEMBER NAME <i class="fa fa-sort"></i></h3>
                                                <p>
                                                    <apex:commandLink action="{!navigateToMember}" value="{!mem.acc.Name}">
                                                        <apex:param name="mId" value="{!mem.acc.Id}"/>
                                                    </apex:commandLink>
                                                </p>
                                            </li>
                                            <li class="Dgray">
                                                <h3 id="{!mem.acc.Id}_RecentlyViewedMembers_Member_Key_EDW__c" onclick="setSortParam('RecentlyViewedMembers','Member_Key_EDW__c');">MEMBER ID <i class="fa fa-sort"></i></h3>
                                                <p>
                                                    <apex:commandLink action="{!navigateToMember}" value="{!mem.acc.Member_Key_EDW__c}">
                                                        <apex:param name="mId" value="{!mem.acc.Id}"/>
                                                    </apex:commandLink>
                                                </p>
                                            </li>               
                                            <li class="Lgray">
                                                <h3 id="{!mem.acc.Id}_RecentlyViewedMembers_ShippingCity" onclick="setSortParam('RecentlyViewedMembers','ShippingCity');">MAILING CITY <i class="fa fa-sort"></i></h3>
                                                <p>
                                                    {!mem.acc.ShippingCity}
                                                </p>
                                            </li>
                                            <li class="Dgray">
                                                <h3 id="{!mem.acc.Id}_RecentlyViewedMembers_ShippingState" onclick="setSortParam('RecentlyViewedMembers','ShippingState');">MAILING STATE <i class="fa fa-sort"></i></h3>
                                                <p>
                                                    {!mem.acc.ShippingState}
                                                </p>
                                            </li>
                                            <li class="Lgray">
                                                <h3 id="{!mem.acc.Id}_RecentlyViewedMembers_Broker__r_Broker_Id__c" onclick="setSortParam('RecentlyViewedMembers','Broker__r.Broker_Id__c');">ASSOCIATED BROKER ID <i class="fa fa-sort"></i></h3>
                                                <p>{!mem.acc.Broker__r.Broker_ID__c}</p>
                                            </li>
                                        </ul>
                                    </div>  
                                    <script>
                                        if('{!strRecentlyViewedTable}' == 'RecentlyViewedMembers')
                                        {
                                            var mobilecolumnName = '{!mem.acc.Id}_' + '{!strRecentlyViewedTable}' + '_' + '{!strRecentlyViewedSortColumn}';
                                            mobilecolumnName = mobilecolumnName.replace('.','_');
                                            $('#' + mobilecolumnName).children('i').first().replaceWith('<i class="{!IF(strRecentlyViewedSortDir == 'ASC','fa fa-sort-desc','fa fa-sort-asc')}"/>');
                                        }   
                                </script>
                                </apex:repeat>
                            </apex:outputpanel>
                        </div>
                        <!-- END: Mobile recently viewed members -->
                    </div>
                </div>
                <!-- End recently viewed members fill in table above. If none, hide. -->
                

                <div id="past-due-balances" class="default-full-table row-fluid" >
                    <div class="span12">        
                        <div class="table-header arrow-container">
                            <h1 id="MembersWithPastDueBalances">Members with Past Due Balances</h1>
                            <div class="rotate-caret mobile"><i class="fa fa-caret-right fa-2x"></i></div>
                        </div>
                        <!-- Members with past due balances mobile table ("desktop" version is removed on mobile, this is displayed.) if none, hide. -->
                        <div class="mobile-expandable-div policies-mobile">
                            <apex:outputpanel rendered="{!If(lstMembersWithPastDueBalances.size > 0, false,true)}">
                                <div class="mobile-policy-container">
                                    <ul><li>No members with past due balances.</li></ul>
                                </div>
                            </apex:outputpanel>
                            <apex:outputpanel rendered="{!If(lstMembersWithPastDueBalances.size > 0, true,false)}">
                                <apex:repeat value="{!lstMembersWithPastDueBalances}" var="memberPD">
                                <div class="mobile-policy-container">
                                    <ul class="memBalance{!memberPD.pastDueCount}" style="display:{!IF(memberPD.pastDueCount>7, 'none', '')}">
                                        <li class="Lgray" >
                                            <h3 id="{!memberPD.memberId}_MembersWithPastDueBalances_Name" onclick="setSortParam('MembersWithPastDueBalances','Name');">MEMBER NAME <i class="fa fa-sort"></i></h3>
                                            <p>
                                                <apex:commandLink action="{!navigateToMember}" value="{!memberPD.memberName}">
                                                    <apex:param name="mId" value="{!memberPD.memberId}"/>
                                                </apex:commandLink>
                                            </p>
                                        </li>
                                        <li class="Dgray">
                                            <h3 id="{!memberPD.memberId}_MembersWithPastDueBalances_Min_Due__c" onclick="setSortParam('MembersWithPastDueBalances','Min_Due__c');">TOTAL PAST DUE <i class="fa fa-sort"></i></h3>
                                            <p>
                                                <apex:outputText value="${0, number, ###,##0.00}">
                                                    <apex:param value="{!memberPD.totalPastDue}"/>
                                                </apex:outputText>
                                            </p>
                                        </li>                
                                        <li class="Lgray">
                                            <h3 id="{!memberPD.memberId}_MembersWithPastDueBalances_IsOverdue__c" onclick="setSortParam('MembersWithPastDueBalances','IsOverdue__c');"># OF POLICIES PAST DUE <i class="fa fa-sort"></i></h3>
                                            <p>{!memberPD.numPastDue}</p>
                                        </li>
                                        <li class="Dgray">
                                            <h3 id="{!memberPD.memberId}_MembersWithPastDueBalances_Oldest_Past_Due_Date__c" onclick="setSortParam('MembersWithPastDueBalances','Oldest_Past_Due_Date__c');">OLDEST PAST DUE DATE<i class="fa fa-sort"></i></h3>
                                            <p>
                                                <apex:outputText value="{0,date,MM/dd/yy}">
                                                    <apex:param value="{!memberPD.oldestPastDueDate}" />
                                                </apex:outputText>
                                            </p>
                                        </li>
                                    </ul>
                                </div>
                                    <script>
                                        if('{!strMemPastDueTable}' == 'MembersWithPastDueBalances')
                                        {
                                            var mobilecolumnName = '{!memberPD.memberId}_' + '{!strMemPastDueTable}' + '_' + '{!strMemPastDueSortColumn}';
                                            $('#' + mobilecolumnName).children('i').first().replaceWith('<i class="{!IF(strMemPastDueSortDir == 'ASC','fa fa-sort-desc','fa fa-sort-asc')}"/>');
                                        }   
                                   </script>
                                </apex:repeat>
                            </apex:outputpanel>
                            <button id="memBalancesShowMoreMobile" type="button" class="btn-pure agentButtonMobile show-more agentButton memBalancesShowMore" style="display:{!If(lstMembersWithPastDueBalances.size <= 7, 'none', '')}" onclick="showMore({!lstMembersWithPastDueBalances.size}, 'memBalance', 'memBalances')">Show More</button>
                            <button type="button" class="btn-pure agentButtonMobile show-less hidden agentButton memBalancesShowLess" onclick="showLess({!lstMembersWithPastDueBalances.size}, 'memBalance', 'memBalances')" >Show Less</button>
                        </div>
                        <apex:outputpanel rendered="{!If(lstMembersWithPastDueBalances.size > 0, true,false)}">
                        <!-- Start - members with past due balances for desktop -->
                        <table class="table policies-desktop table-striped" id="MemberDueBal">
                            <thead>
                                <tr>
                                    <th class="description" id="MembersWithPastDueBalances_Name" onclick="setSortParam('MembersWithPastDueBalances','Name');">MEMBER NAME <i class="fa fa-sort"></i></th>
                                    <th class="number" id="MembersWithPastDueBalances_Min_Due__c" onclick="setSortParam('MembersWithPastDueBalances','Min_Due__c');">TOTAL PAST DUE <i class="fa fa-sort"></i></th>
                                    <th class="number" id="MembersWithPastDueBalances_IsOverdue__c" onclick="setSortParam('MembersWithPastDueBalances','IsOverdue__c');"># OF POLICIES PAST DUE <i class="fa fa-sort"></i></th>
                                    <th class="number" id="MembersWithPastDueBalances_Oldest_Past_Due_Date__c" onclick="setSortParam('MembersWithPastDueBalances','Oldest_Past_Due_Date__c');">OLDEST PAST DUE DATE <i class="fa fa-sort"></i></th>                    
                                </tr> 
                                <script>
                                    if('{!strMemPastDueTable}' == 'MembersWithPastDueBalances')
                                    {
                                        var columnName = '{!strMemPastDueTable}' + '_' + '{!strMemPastDueSortColumn}';
                                        $('#' + columnName).children('i').first().replaceWith('<i class="{!IF(strMemPastDueSortDir == 'ASC','fa fa-sort-desc','fa fa-sort-asc')}"/>');
                                    }   
                               </script>
                            </thead>
                            <tbody>
                                <apex:repeat value="{!lstMembersWithPastDueBalances}" var="memberPD">
                                <tr class="memBalance{!memberPD.pastDueCount}" style="display:{!IF(memberPD.pastDueCount>7, 'none', '')}">
                                    <td>
                                        <apex:commandLink action="{!navigateToMember}" value="{!memberPD.memberName}">
                                            <apex:param name="mId" value="{!memberPD.memberId}"/>
                                        </apex:commandLink>
                                    </td>
                                    <td>
                                        <apex:outputText value="${0, number, ###,##0.00}">
                                            <apex:param value="{!memberPD.totalPastDue}"/>
                                        </apex:outputText>
                                    </td>
                                    <td>
                                        {!memberPD.numPastDue}
                                    </td>
                                    <td>
                                        <apex:outputText value="{0,date,MM/dd/yy}">
                                            <apex:param value="{!memberPD.oldestPastDueDate}" />
                                        </apex:outputText>
                                    </td>
                                </tr>
                                </apex:repeat>
                            </tbody>
                        </table>
                        </apex:outputpanel>
                        <apex:outputpanel rendered="{!If(lstMembersWithPastDueBalances.size > 0,false,true)}">
                            <table class="table policies-desktop table-striped">
                                <tr style="width:100%;">
                                    <td class="center-icon" colspan="5" style="width:100%; display:{!If(lstMembersWithPastDueBalances.size != 0, 'none', '')};">
                                        <span >No members with past due balances.</span>
                                    </td>
                                </tr>
                            </table>
                        </apex:outputpanel>
                        <!-- End - Members with past due balances for desktop -->
                    </div>
                    <button id="memBalancesShowMoreDesktop" type="button" class="btn-pure desktop show-more agentButton memBalancesShowMore" style="display:{!If(lstMembersWithPastDueBalances.size <= 7, 'none', '')}" onclick="showMore({!lstMembersWithPastDueBalances.size}, 'memBalance', 'memBalances')">Show More</button>
                    <button type="button" class="btn-pure desktop show-less hidden agentButton memBalancesShowLess" onclick="showLess({!lstMembersWithPastDueBalances.size}, 'memBalance', 'memBalances')" >Show Less</button>
                </div>

                <!-- Members with Claim Activity fill in table below. If none, hide. -->
                <div id="claim-activity" class="default-full-table row-fluid" >
                    <div class="span12">        
                        <div class="table-header arrow-container">
                            <h1 id="MembersWithClaimActivity">Members with Claim Activity</h1>
                            <div class="rotate-caret mobile"><i class="fa fa-caret-right fa-2x"></i></div>
                        </div>
                        <!-- Members with Claim Activity mobile table ("desktop" version is removed on mobile, this is displayed.) if none, hide. -->
                        <div class="mobile-expandable-div policies-mobile">
                            <apex:outputpanel rendered="{!If(lstMemberClaims.size > 0, false,true)}">
                                <div class="mobile-policy-container">
                                    <ul><li>No members with claim activity.</li></ul>
                                </div>
                            </apex:outputpanel>
                            <apex:outputpanel rendered="{!If(lstMemberClaims.size > 0, true,false)}">
                                <apex:repeat value="{!lstMemberClaims}" var="memberCA">
                                <div class="mobile-policy-container memClaim{!memberCA.claimCount}" style="display:{!IF(memberCA.claimCount > 7, 'none', '')}">
                                    <ul>
                                        <li class="Dgray">
                                            <h3 id="{!memberCA.claimNumber}_MembersWithClaimActivity_Member__r_Name" onclick="setSortParam('MembersWithClaimActivity','Member__r.Name');">MEMBER NAME <i class="fa fa-sort"></i></h3>
                                            <p>
                                                <apex:commandLink action="{!navigateToMember}" value="{!memberCA.memberName}">
                                                    <apex:param name="mId" value="{!memberCA.memberId}"/>
                                                </apex:commandLink>
                                            </p>
                                        </li>
                                        <li class="Lgray">
                                            <h3 id="{!memberCA.claimNumber}_MembersWithClaimActivity_RecordType_Name" onclick="setSortParam('MembersWithClaimActivity','RecordType.Name');">POLICY TYPE <i class="fa fa-sort"></i></h3>
                                            <p><img  src="{!URLFOR($Resource.SL_PureInsuranceResources,'images/'+LOWER(memberCA.policyType)+'.png')}"/></p>
                                        </li>
                                        <li class="Dgray">
                                            <h3 id="{!memberCA.claimNumber}_MembersWithClaimActivity_Claim_Number__c" onclick="setSortParam('MembersWithClaimActivity','Claim_Number__c');">CLAIM NUMBER <i class="fa fa-sort"></i></h3>
                                            <p>
                                                <apex:outputpanel rendered="{!If((memberCA.canShowDetails == false),true,false)}">
                                                    {!memberCA.claimNumber}
                                                </apex:outputpanel>
                                                <apex:outputpanel rendered="{!If((memberCA.canShowDetails),true,false)}">
                                                    <apex:commandLink action="{!navigateToClaim}" value="{!memberCA.claimNumber}">
                                                        <apex:param name="claimNum" value="{!memberCA.claimNumber}"/>
                                                        <apex:param name="mId" value="{!memberCA.memberId}"/>
                                                    </apex:commandLink>
                                                </apex:outputpanel>
                                            </p>
                                        </li>                
                                        <li class="Lgray">
                                            <h3 id="{!memberCA.claimNumber}_MembersWithClaimActivity_Total_Paid__c" onclick="setSortParam('MembersWithClaimActivity','Total_Paid__c');">AMOUNT PAID <i class="fa fa-sort"></i></h3>
                                            <p>
                                                <apex:outputpanel rendered="{!If((memberCA.CanShowDetails == false),true,false)}">
                                                N/A
                                                </apex:outputpanel>
                                                <apex:outputpanel rendered="{!If((memberCA.CanShowDetails),true,false)}">
                                                    <apex:outputText value="${0, number, ###,##0.00}"   >
                                                        <apex:param value="{!memberCA.totalPaid}"/>
                                                    </apex:outputText>
                                                </apex:outputpanel>
                                            </p>
                                        </li>
                                        <li class="Dgray">
                                            <h3 id="{!memberCA.claimNumber}_MembersWithClaimActivity_Loss_Location__c" onclick="setSortParam('MembersWithClaimActivity','Loss_Location__c');">LOSS LOCATION <i class="fa fa-sort"></i></h3> 
                                            <p>{!memberCA.LossLocation}</p>
                                        </li>
                                        <li class="Lgray">
                                            <h3 id="{!memberCA.claimNumber}_MembersWithClaimActivity_Date_of_Loss__c" onclick="setSortParam('MembersWithClaimActivity','Date_of_Loss__c');">DATE OF LOSS <i class="fa fa-sort"></i></h3>
                                            <p>
                                                <apex:outputText value="{0,date,MM/dd/yy}">
                                                    <apex:param value="{!memberCA.dateOfLoss}" />
                                                </apex:outputText>
                                            </p>
                                        </li>
                                    </ul>
                                </div>
                                <script>
                                    if('{!strMemClaimActTable}' == 'MembersWithClaimActivity')
                                    {
                                        var mobilecolumnName = '{!memberCA.claimNumber}_' + '{!strMemClaimActTable}' + '_' + '{!strMemClaimActSortColumn}';
                                        mobilecolumnName = mobilecolumnName.replace('.','_');

                                        var sortIcon;
                                        if('{!strMemClaimActSortColumn}' === 'Total_Paid__c'){
                                            sortIcon = $('#' + mobilecolumnName).children('span').children('i').first()
                                        } else {
                                            sortIcon = $('#' + mobilecolumnName).children('i').first()
                                        }

                                        sortIcon.replaceWith('<i class="{!IF(strMemClaimActSortDir == 'ASC','fa fa-sort-desc','fa fa-sort-asc')}"/>');
                                    }   
                               </script>  
                              </apex:repeat>
                            </apex:outputpanel>
                            <button id="claimShowMoreMobile" type="button" class="btn-pure agentButtonMobile show-more agentButton claimShowMore" style="display:{!If(lstMemberClaims.size <= 7, 'none', '')}" onclick="showMore({!lstMemberClaims.size}, 'memClaim', 'claim')">Show More</button>
                            <button type="button" class="btn-pure agentButtonMobile show-less hidden agentButton claimShowLess" onclick="showLess({!lstMemberClaims.size}, 'memClaim', 'claim')">Show Less</button>
                        </div>
                        <apex:outputpanel rendered="{!If(lstMemberClaims.size > 0, true,false)}">
                        <!-- Start - Members with Claim Activity for desktop -->
                        <table class="table policies-desktop table-striped">
                            <thead>
                                <tr>
                                    <th id="MembersWithClaimActivity_Member__r_Name" onclick="setSortParam('MembersWithClaimActivity','Member__r.Name');">MEMBER NAME <i class="fa fa-sort"></i></th>
                                    <th id="MembersWithClaimActivity_RecordType_Name" class="type" onclick="setSortParam('MembersWithClaimActivity','RecordType.Name');" style="width:14%;">POLICY TYPE <i class="fa fa-sort"></i></th>
                                    <th id="MembersWithClaimActivity_Claim_Number__c" class="number" onclick="setSortParam('MembersWithClaimActivity','Claim_Number__c');">CLAIM NUMBER <i class="fa fa-sort"></i></th>
                                    <th id="MembersWithClaimActivity_Total_Paid__c" class="number"><span onclick="setSortParam('MembersWithClaimActivity','Total_Paid__c');">Amount Paid <i class="fa fa-sort"></i></span> <a class="has-popover" data-toggle="popover" data-placement="right" data-content="This is the amount paid either to your client or to those helping to service their claim. Due to privacy protection, this value excludes all medical payments, personal injury protection, and bodily injury." href="#"><i class="icon fa fa-info-circle"></i></a></th>
                                    <th id="MembersWithClaimActivity_Loss_Location__c" class="description" onclick="setSortParam('MembersWithClaimActivity','Loss_Location__c');">LOSS LOCATION <i class="fa fa-sort"></i></th>
                                    <th id="MembersWithClaimActivity_Date_of_Loss__c" onclick="setSortParam('MembersWithClaimActivity','Date_of_Loss__c');">DATE OF LOSS <i class="fa fa-sort"></i></th>
                                </tr>
                                <script>
                                    if('{!strMemClaimActTable}' == 'MembersWithClaimActivity')
                                    {
                                        var columnName = '{!strMemClaimActTable}' + '_' + '{!strMemClaimActSortColumn}';
                                        columnName = columnName.replace('.','_');

                                        var sortIcon;
                                        if('{!strMemClaimActSortColumn}' === 'Total_Paid__c'){
                                            sortIcon = $('#' + columnName).children('span').children('i').first();
                                        } else {
                                            sortIcon = $('#' + columnName).children('i').first();
                                        }

                                        sortIcon.replaceWith('<i class="{!IF(strMemClaimActSortDir == 'ASC','fa fa-sort-desc','fa fa-sort-asc')}"/>');
                                    }   
                               </script>
                            </thead>
                            <tbody>
                                <apex:repeat id="membersWithClaimActivity" value="{!lstMemberClaims}" var="memberCA">
                                <tr class="memClaim{!memberCA.claimCount}" style="display:{!IF(memberCA.claimCount > 7, 'none', '')}">
                                    <td>
                                        <apex:commandLink action="{!navigateToMember}" value="{!memberCA.memberName}">
                                            <apex:param name="mId" value="{!memberCA.memberId}"/>
                                        </apex:commandLink>
                                    </td>
                                    <td class="center-icon">
                                        <img  src="{!URLFOR($Resource.SL_PureInsuranceResources,'images/'+LOWER(memberCA.policyType)+'.png')}" />
                                    </td>
                                    <td>
                                        <apex:outputpanel rendered="{!If((memberCA.CanShowDetails == false),true,false)}">
                                            {!memberCA.claimNumber}
                                        </apex:outputpanel>
                                        <apex:outputpanel rendered="{!If((memberCA.CanShowDetails),true,false)}">
                                            <apex:commandLink action="{!navigateToClaim}" value="{!memberCA.claimNumber}">
                                                <apex:param name="claimNum" value="{!memberCA.claimNumber}"/>
                                                <apex:param name="mId" value="{!memberCA.memberId}"/>
                                            </apex:commandLink>
                                        </apex:outputpanel>
                                    </td>
                                    <td>
                                        <apex:outputpanel rendered="{!If((memberCA.CanShowDetails == false),true,false)}">
                                            N/A
                                        </apex:outputpanel>
                                        <apex:outputpanel rendered="{!If((memberCA.CanShowDetails),true,false)}">
                                        <apex:outputpanel rendered="{!If(memberCA.TotalPaid == null, true, false)}">
                                            $0.00
                                        </apex:outputpanel>
                                        <apex:outputpanel rendered="{!If(memberCA.totalPaid == null, false, true)}">
                                            <apex:outputText value="${0, number, ###,##0.00}">
                                                <apex:param value="{!memberCA.totalPaid}"/>
                                            </apex:outputText>
                                        </apex:outputpanel>
                                            
                                        </apex:outputpanel>
                                    </td>
                                    <td>{!memberCA.lossLocation}</td>
                                    <td>
                                        <apex:outputText value="{0,date,MM/dd/yy}">
                                            <apex:param value="{!memberCA.dateOfLoss}"/>
                                        </apex:outputText>
                                    </td>
                                </tr>
                                </apex:repeat>
                            </tbody>
                        </table>
                        </apex:outputpanel>
                        <apex:outputpanel rendered="{!If(lstMemberClaims.size > 0,false,true)}">
                            <table class="table policies-desktop table-striped">
                                <tr style="width:100%;">
                                    <td class="center-icon" colspan="5" style="width:100%; display:{!If(lstMemberClaims.size != 0, 'none', '')};">
                                        <span >No members with claim activity.</span>
                                    </td>
                                </tr>
                            </table>
                        </apex:outputpanel>
                        <!-- End - Members with Claim Activity for desktop -->
                    </div>
                    <button id="claimShowMoreDesktop" class="btn-pure desktop show-more agentButton claimShowMore" style="display:{!If(lstMemberClaims.size <= 7, 'none', '')}" onclick="showMore({!lstMemberClaims.size}, 'memClaim', 'claim')">Show More</button>
                    <button class="btn-pure desktop show-less hidden agentButton claimShowLess" onclick="showLess({!lstMemberClaims.size}, 'memClaim', 'claim')">Show Less</button>
                    
                </div>
                </apex:form>
                <br/>
                <c:SL_SiteFooterComponent />
                <!-- Mobile Footer Begins here-->
                <div class="footer-info row-fluid mobile">
                   <div class="span12">   
                       <p>Copyright &copy; 2015 Privilege Underwriters Reciprocal Exchange.  All Rights Reserved.</p>
                   </div>
                   <p><a href='{!pureInsurancelink}' target="_blank">pureinsurance.com</a> &nbsp;|&nbsp; <a href='{!privacyPolicyLink}' target="_blank">Privacy Policy</a> &nbsp;|&nbsp; <a href='{!fAQlink}' target="_blank">FAQ</a> &nbsp;|&nbsp; <a href='{!shareYourStorylink}' target="_blank">Share Your Story</a></p>
                </div>
                <script>
           
                  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
                  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
                  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
                  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
                    
                  ga('create', 'UA-63232721-1', 'force.com');
                  
                  ga('send', 'pageview');

                </script>
            </div>
            
            <apex:form style="margin:0px;">
                <c:SL_PureJSScripts />
                
                <apex:pagemessages />
                <div style="visibility: visible;color: red;" id="errorTextId" align="center"/>
                <script>
                    if($('.messageText').text() != '')
                    {
                        var strError = $('.messageText').text();
                        SL_PureJSUtil.registerShowErrorMessage(strError.split(/:([^:]+)$/)[1]);
                    }
                </script>
            </apex:form>

        </apex:define>
    </apex:composition>
</apex:page>