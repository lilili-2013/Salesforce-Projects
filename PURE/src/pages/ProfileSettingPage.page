<apex:page html-class="profile-settings" showHeader="false" sidebar="false" standardStylesheets="false" action="{!pageAction}" controller="SL_ProfileSettingPageController">
 <!-- Start of Page -->
  <style>
  	form label span {position:inherit;}
  </style>
	<apex:composition template="SL_SiteTemplate">
		<!-- Start of Main section -->        
		<apex:define name="mainSection">
<!-- 		    <div class="wrapper row-fluid"> -->
		        <div id="main-content" class="span9" style="margin-left: 0em;">
					<apex:form >
					 	<script>
					 		$( document ).ready(function() 
					 		{
					 		    if("{!isRegistered}" == "true")
					 		    {
					 		    	document.getElementById("modelId1").click();
					 		    }
					 		
					 			// Used to display red 'x' on page load in edit mailing address modal window.
							    $('#editAddress .option').removeClass('active-address-modal');
								$('#editAddress .address-options input[type=radio]:checked').parents('.option').addClass('active-address-modal');
								
								// Used to display red 'x' on page load in edit Billing address modal window.
								$('#editBillingAddress .option').removeClass('active-billingaddress-modal');
								$('#editBillingAddress .address-options input[type=radio]:checked').parents('.option').addClass('active-billingaddress-modal');
								
								// Used to display red 'x' on page load in edit Email address modal window.
								$('#editEmail .option').removeClass('active-email-modal');
								$('.email-options input[type=radio]:checked').parents('.option').addClass('active-email-modal');
								
								// Used to display red 'x' on page load in edit Phone address modal window.
								$('#editPhone .option').removeClass('active-phone-modal');
								$('.phone-options .option .radio input[type=radio]:checked').parents('.option').addClass('active-phone-modal');
							});
					 	</script>
					   
						<apex:pagemessages id="errorMessageId"/> 
						
			  			<!-- welcome message goes in here -->
			            <h1 class="welcome">Profile Settings</h1>
			            <div class="welcome-sub-header"><p class="lead">Current Member Information</p></div>
			            <hr />
			            
			            <!-- bread crumb goes here -->
			            <div class="row-fluid crumb-container">
			            	<apex:outputPanel rendered="{!IF($Profile.Name == 'Pure Customer Community Login User', true, false)}">
				                <ul class="breadcrumb pure-crumb">
				                    <li><a href="/MemberHomePage">pure</a> <span class="divider">/</span></li>
				                    <li class="active">profile</li>
				                </ul>
				            </apex:outputPanel>
				            <apex:outputPanel rendered="{!IF($Profile.Name != 'Pure Customer Community Login User', true, false)}">
				                <ul class="breadcrumb pure-crumb">
				                    <li><a href="/BrokerView/MemberHomePage?mId={!$CurrentPage.parameters.mId}">pure</a> <span class="divider">/</span></li>
				                    <li class="active">profile</li>
				                </ul>
				            </apex:outputPanel>
			            </div>
	
					  	<!-- editable member-info goes here -->
			            <div id="member-info" class="row-fluid">
			                <div class="span12">
			                    <div class="row-fluid">
			                        <dl class="span6">
			                            <div class="member-info-container">
			                                <dt>MEMBER NAME:</dt>
			                                <dd>{!objAccount.Name}</dd>
			                            </div>
			                        </dl>
			                        <dl class="span6">
			                            <div class="member-info-container">
			                                <dt>PASSWORD:</dt>
			                                <dd id="user-password"><span id="password-value">••••••••••</span> <a id="change-password-btn" href="#editPassword" class="bracket-link" data-toggle="modal" style="display:{!If($Profile.Name != 'Pure Customer Community Login User','none;','')}">[<i class="icon icon-resize fa fa-pencil"></i>]</a></dd>
											
			                                <!-- modal begins here  -->
			                                <div id="editPassword" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="editPasswordlabel" aria-hidden="hidden">
			                                    <div class="modal-header">
			                                        <button type="button" class="close pure-modal-close" data-dismiss="modal" aria-hidden="true">CLOSE X</button>
			                                        <h3 class="myModalLabel">Edit Your Password</h3>
			                                    </div>
			                                    <div class="modal-body">
			                                        <div class="span12">
			                                            <form>
			                                                <fieldset>
			                                                	<label class="login-label">ENTER OLD PASSWORD:</label>
			                                                    <input id="oldPassword" type="password" placeholder="" />
			                                                    <label class="login-label">ENTER NEW PASSWORD:</label>
			                                                    <input id="new-password1" type="password" placeholder="" />
	<!-- 															<apex:inputSecret id="new-password1" html-type="text" html-placeholder="" value="{!updatedPassword}"/>					 -->
			
			                                                    <label class="login-label">CONFIRM NEW PASSWORD:</label>
			                                                    <input id="new-password2" type="password" placeholder="" value=""/>
	<!-- 		                                                    <apex:inputSecret id="new-password2" html-type="text" html-placeholder="" value="{!updatedPassword}"/> -->
			                                                </fieldset>
	<!-- 		                                                <apex:inputhidden id="changePassword" value="{!updatedPassword}" /> -->
			                                            </form>
			                                        </div>
			                                    </div>
			                                    <apex:actionFunction action="{!dummy}" name="storeUpdatedPwd" rerender="dummy">
			                                    	<apex:param name="param1" value="" assignTo="{!strupdatedPassword}"/>
			                                    	<apex:param name="param2" value="" assignTo="{!strOldPassword}"/>
			                                    </apex:actionFunction>	
			                                    <div class="modal-footer">
			                                        <button class="btn btn-pure-cancel" data-dismiss="modal" aria-hidden="true">CANCEL</button>
			                                        <button id="change-password-continue" class="btn btn-pure">CONTINUE <i class="fa fa-caret-right"></i></button>
			                                    </div>
			                                </div>
			                                
			                                <!-- modal ends here -->
			                            </div>
			                        </dl>
			                     </div>
			                     <hr/>
			                     <div class="row-fluid">
			                        <dl class="span6">
			                            <div class="member-info-container">
			                                <dt>PRIMARY MAILING ADDRESS:</dt>
			                                <dd id="user-primary-address" style="word-wrap: break-word;width:290px;"><apex:outputText escape="false" value="{!PrimaryMailingAddrs}"/></dd>
			                                <dd style="display:{!If($Profile.Name != 'Pure Customer Community Login User','none;','')}"><a href="#editAddress" class="open-address-change bracket-link" data-toggle="modal">[<i class="icon icon-resize fa fa-pencil"></i>]</a></dd>
											
			                                <!-- modal begins here  -->
			                                <div id="editAddress" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="editPhonelabel" aria-hidden="hidden">
			                                    <div class="modal-header">
			                                        <button type="button" class="close pure-modal-close" data-dismiss="modal" aria-hidden="true">CLOSE X</button>
			                                        <h3 class="myModalLabel">Edit Your Primary Mailing Address</h3>
			                                    </div>
			                                    <div class="modal-body">
			                                        <div class="span12">
			                                            <h3>SELECT PRIMARY MAILING ADDRESS:</h3>
			                                            	<script>
																function setEditAddrsVal(contInfoId,isPrimary)
																{
																	var strAddr1 = $('#' + contInfoId).find('.account-address1').text();
																	var strAddr2 = $('#' + contInfoId).find('.account-address2').text(); 
																	var strCity = $('#' + contInfoId).find('.account-city').text(); 
																	var strState = $('#' + contInfoId).find('.account-state').text(); 
																	var strZip = $('#' + contInfoId).find('.account-zip').text();  
																	
																	editMailingAddress(strAddr1,strAddr2,strCity,strState,strZip,'Mailing',contInfoId);
																}
															</script>
															<apex:actionFunction action="{!newAddresAdd}" name="editMailingAddress" rerender="dummy">
			                                                		<apex:param name="param1" value="" assignTo="{!strNewStreet}"/>
			                                                		<apex:param name="param2" value="" assignTo="{!strNewStreet1}"/>
			                                                		<apex:param name="param3" value="" assignTo="{!strNewCity}"/>
			                                                		<apex:param name="param4" value="" assignTo="{!strNewState}"/>
			                                                		<apex:param name="param5" value="" assignTo="{!strNewZipcode}"/>
			                                                		<apex:param name="param6" value="" assignTo="{!strAddresType}"/>
			                                                		<apex:param name="param7" value="" assignTo="{!contInfoId}"/>
			                                                 </apex:actionFunction>
														<div id="MailingId">
				                                            <div class="address-options">
																	<apex:outputPanel id="dummy"/>
				                                                	<apex:actionFunction action="{!newAddresAdd}" name="editAddrs" rerender="dummy">
				                                                		<apex:param name="param1" value="" assignTo="{!strNewStreet}"/>
				                                                		<apex:param name="param2" value="" assignTo="{!strNewStreet1}"/>
				                                                		<apex:param name="param3" value="" assignTo="{!strNewCity}"/>
				                                                		<apex:param name="param4" value="" assignTo="{!strNewState}"/>
				                                                		<apex:param name="param5" value="" assignTo="{!strNewZipcode}"/>
				                                                		<apex:param name="param6" value="" assignTo="{!strAddresType}"/>
				                                                		<apex:param name="param7" value="" assignTo="{!strNewlyCreatedContactInfoId}"/>
				                                                	</apex:actionFunction>
				                                                	<apex:actionfunction name="DelMailingAddress" action="{!deleteMailingAddress}" rerender="dummy">
			                                            				<apex:param name="param1" value="" assignto="{!strDeletedMailingAddress}"/>
			                                             			 </apex:actionfunction>
				                                                    <apex:repeat value="{!lstMailingTypeContactInfo}" var="memAddres" >
				                                                    	<apex:outputpanel rendered="{!IF(OR(memAddres.Street__c != '',memAddres.Street_2__c != '',memAddres.City__c != '',memAddres.State__c != '',memAddres.Zip__c != ''),true,false)}">
							                                                  <div class="option active-address-modal">
								                                                <label class="radio">
								                                                    <input type="radio" name="optionsRadios4" value="option1" />
								                                                    <div class="address-option" id="{!memAddres.Id}">
								                                                        <span contenteditable="false" class="account-address1">{!memAddres.Street__c}</span>
								                                                        <span contenteditable="false" class="account-address2">{!memAddres.Street_2__c}</span>
								                                                        <br/>
								                                                        <span contenteditable="false" class="account-city">{!memAddres.City__c}</span>,
								                                                        <span contenteditable="false" class="account-state" >{!memAddres.State__c}</span> 
								                                                        <span contenteditable="false" class="account-zip">{!memAddres.Zip__c}</span>
								                                                    </div>
								                                                </label>
								                                                 <span class="brackets">[</span><a href="" class="edit-tag noli" id="MailId"><span class="original-text"><i class="fa fa-pencil"></i></span><span class="active-text hidden" id="{!memAddres.Id}" onclick="setEditAddrsVal(this.id,false);"><i class="icon fa fa-check fa-1x"></i></span></a>
								                                                 <a href="#" class="remove-item" id="DeleteMailing_{!memAddres.Id}"><i class="fa fa-times text-error"></i></a><span class="brackets">]</span>
								                                               </div> 
								                                               <script>
								                                               		var isPrimary = '{!memAddres.Is_Primary__c}';
								                                               		var recordId = '{!memAddres.Id}';
								                                               		if(isPrimary == 'true')
								                                               		{
								                                               			var item = document.getElementById(recordId);
								                                               			item.previousSibling.previousSibling.checked = 'checked';
								                                               		}	
								                                               </script>
								                                         </apex:outputpanel>      
					                                                </apex:repeat>
				                                            </div>
			                                            </div>
			                                            <br/>
			                                            <h3>ADD NEW MAILING ADDRESS:</h3>
			                                              <apex:actionfunction name="selectedPrimaryMailingAddressId" action="{!dummy}" rerender="dummy">
			                                            	<apex:param name="param1" value="" assignto="{!strPrimaryMailingAddId}"/>
			                                              </apex:actionfunction>
			                                            <form class="add-new-address-option">
			                                                <apex:inputText html-class="address1-input input-block-level" html-type="text" html-placeholder="Address Line 1" value="{!strNewStreet}"/>
			                                                <apex:inputText html-class="address2-input input-block-level" html-type="text" html-placeholder="Address Line 2" value="{!strNewStreet1}"/>
			                                                <div class="inline-forms">
			                                                    <apex:inputText html-class="city-input span4" html-type="text" html-placeholder="City" value="{!strNewCity}"/>
			                                                    <apex:inputText html-class="state-input span3" html-type="text" html-placeholder="State" value="{!strNewState}"/>
			                                                    <apex:inputText html-class="zip-input span4" html-type="text" html-placeholder="Zip Code" value="{!strNewZipcode}"/>    
			                                                </div>
			                                                <input type="button" id="MailingAddress" value="Add" class="add-address-btn"/>
			                                            </form>
			                                        </div>
			                                    </div>
			                                    <div class="modal-footer">
			                                        <button class="btn btn-pure-cancel" data-dismiss="modal" aria-hidden="true">CANCEL</button>
			                                        <button id="new-primary-address" class="btn btn-pure" onclick="selectedPrimaryMailingAddressId($('#MailingId').find('.address-options input[type=radio]:checked').next('.address-option').attr('id'));">CONTINUE <i class="fa fa-caret-right"></i></button>
			                                    </div>
			                                </div>
			                                <!-- modal ends here -->
			                            </div>
			                        </dl>
			                        <dl class="span6">
			                            <div class="member-info-container">
			                                <dt>PRIMARY BILLING ADDRESS:</dt>
			                                <dd id="user-primary-billing" style="word-wrap: break-word;"><apex:outputText escape="false" value="{!PrimaryBillingAddrs}"/></dd>
			                                <dd style="display:{!If($Profile.Name != 'Pure Customer Community Login User','none;','')}"><a href="#editBillingAddress" class="bracket-link" data-toggle="modal">[<i class="icon icon-resize fa fa-pencil"></i>]</a></dd>
			                                <!-- modal begins here  -->
			                                <div id="editBillingAddress" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="editPhonelabel" aria-hidden="hidden">
			                                    <div class="modal-header">
			                                        <button type="button" class="close pure-modal-close" data-dismiss="modal" aria-hidden="true">CLOSE X</button>
			                                        <h3 class="myModalLabel">Edit Your Primary Billing Address</h3>
			                                    </div>
			                                    <div class="modal-body">
			                                        <div class="span12">
			                                            <h3>SELECT PRIMARY BILLING ADDRESS:</h3>
			                                            <script>
																function setEditBillingAddrsVal(contInfoId,isPrimary)
																{
																	var strAddr1 =  $('#' + contInfoId).find('.account-address3').text();
																	var strAddr2 =  $('#' + contInfoId).find('.account-address4').text();
																	var strCity =  $('#' + contInfoId).find('.account-city2').text();
																	var strState =  $('#' + contInfoId).find('.account-state2').text();
																	var strZip =  $('#' + contInfoId).find('.account-zip2').text();
																	editMailingAddress(strAddr1,strAddr2,strCity,strState,strZip,'Billing',contInfoId);
																}
															</script>
														<div id="BillingId">	
				                                            <div class="address-options">
				                                                <apex:outputPanel id="pnlBillingAddrs">
					                                                <apex:repeat value="{!lstBillingTypeContactInfo}" var="memBillAddres">
					                                                	<apex:outputpanel rendered="{!IF(OR(memBillAddres.Street__c != '',memBillAddres.Street_2__c != '',memBillAddres.City__c != '',memBillAddres.State__c != '',memBillAddres.Zip__c != ''),true,false)}">
							                                                <div class="option active-billingaddress-modal">
							                                                	<label class="radio">
								                                                    <input type="radio" name="optionsRadios5" id="optionsRadios1" value="option1" />
								                                                    <div class="address-option" id="{!memBillAddres.Id}">
								                                                        <span contenteditable="false" class="account-address3" >{!memBillAddres.Street__c}</span>
								                                                        <span contenteditable="false" class="account-address4">{!memBillAddres.Street_2__c}<br/></span>
								                                                        <span contenteditable="false" class="account-city2">{!memBillAddres.City__c}</span>,
								                                                        <span contenteditable="false" class="account-state2">{!memBillAddres.State__c}</span> 
								                                                        <span contenteditable="false" class="account-zip2">{!memBillAddres.Zip__c}</span>
								                                                    </div>
							                                                	</label>
							                                                	 <span class="brackets">[</span><a href="" class="edit-tag noli" id="BillId"> <span class="original-text"><i class="fa fa-pencil"></i></span><span class="active-text hidden"  id="{!memBillAddres.Id}" onclick="setEditBillingAddrsVal(this.id,false);"><i class="icon fa fa-check fa-1x"></i></span></a>
							                                                	 <a href="#" class="remove-item" id="DeleteBilling_{!memBillAddres.Id}"><i class="fa fa-times text-error"></i></a><span class="brackets">]</span>
							                                                </div>
							                                                 <script>
								                                               		var isPrimary = '{!memBillAddres.Is_Primary__c}';
								                                               		var recordId = '{!memBillAddres.Id}';
								                                               		if(isPrimary == 'true')
								                                               		{
								                                               			var item = document.getElementById(recordId);
								                                               			item.previousSibling.previousSibling.checked = 'checked';
								                                               		}	
								                                             </script>
							                                             </apex:outputpanel>
					                                                </apex:repeat>
				                                                 </apex:outputPanel>
				                                            </div>
			                                            </div>
			                                            <br/>
			                                            <h3>ADD NEW BILLING ADDRESS:</h3>
			                                            <apex:actionfunction name="selectedPrimaryBillingAddressId" action="{!dummy}" rerender="dummy">
			                                            	<apex:param name="param1" value="" assignto="{!strPrimaryBillingAddId}"/>
			                                            </apex:actionfunction>	
			                                            <apex:actionfunction name="delBillingAddress" action="{!deleteBillingAddress}" rerender="dummy">
			                                            	<apex:param name="param1" value="" assignto="{!strDeletedBillingAddress}"/>
			                                            </apex:actionfunction>	
			                                            
			                                            <form class="add-new-address-option">
			                                                <apex:inputText html-class="address1-input input-block-level" html-type="text" html-placeholder="Address Line 1" value="{!strNewStreet}"/>
			                                                <apex:inputText html-class="address2-input input-block-level" html-type="text" html-placeholder="Address Line 2" value="{!strNewStreet1}"/>
			                                                <div class="inline-forms">
			                                                    <apex:inputText html-class="city-input span4" html-type="text" html-placeholder="City" value="{!strNewCity}"/>
			                                                    <apex:inputText html-class="state-input span3" html-type="text" html-placeholder="State" value="{!strNewState}"/>
			                                                    <apex:inputText html-class="zip-input span4" html-type="text" html-placeholder="Zip Code" value="{!strNewZipcode}"/>    
			                                                </div>
	<!-- 		                                                <input class="add-address-btn" type="submit" value="Add"/> -->
			                                                 <input type="button" value="Add" id="BillingAddress" class="add-address-btn"/>
			                                            </form>
			                                        </div>
			                                    </div>
			                                    <div class="modal-footer">
			                                        <button class="btn btn-pure-cancel" data-dismiss="modal" aria-hidden="true">CANCEL</button>
			                                        <button id="new-primary-billing" class="btn btn-pure" onclick="selectedPrimaryBillingAddressId($('#BillingId').find('.address-options input[type=radio]:checked').next('.address-option').attr('id'));">CONTINUE <i class="fa fa-caret-right"></i></button>
			                                    </div>
			                                </div>
			                                <!-- modal ends here -->
			                            </div>
			                        </dl>
			                    </div>
			                    <hr />
			                     <div class="row-fluid">
			                        <dl class="span6">
			                            <div id="user-primary-email" class="member-info-container">
			                                <dt>PRIMARY EMAIL ADDRESS:</dt>
			                                <div class="primary-email-options" style="word-wrap:break-word;">
			                                    <apex:repeat value="{!lstEmailTypeContactInfo}" var="memEmailAddres">
			                                    	<apex:outputPanel rendered="{!if(memEmailAddres.Type__c == 'Email',true,false)}">
			                                    		<dd class="{!if(memEmailAddres.Is_Primary__c,'active-email','')}" ><i class="{!if(memEmailAddres.Is_Primary__c,'icon fa fa-check fa-1x','')}"></i> <span style="word-wrap: break-word;">{!memEmailAddres.Email__c}</span></dd>
			                                    	</apex:outputPanel>	
			                                    </apex:repeat>
			                                    <apex:outputpanel rendered="{!IF(lstEmailTypeContactInfo.size == 0,true,false)}">
			                                    	<dd class="active-email"><i class="icon fa fa-check fa-1x"></i><span style="word-wrap: break-word;">{!strPrimaryEmail}</span></dd>
			                                    </apex:outputpanel>
	<!-- 		                                    <dd>ThysD@chpnet_2.org</dd> -->
	<!-- 		                                    <dd>Thys3333D@chpnet.org</dd> -->
			                                    <dd style="display:{!If($Profile.Name != 'Pure Customer Community Login User','none;','')}"><a href="#editEmail" class="bracket-link" data-toggle="modal">[<i class="icon icon-resize fa fa-pencil"></i>]</a></dd>
			                                </div>
			                                
			                                <!-- modal begins here  -->
			                                <div id="editEmail" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="editPhonelabel" aria-hidden="hidden">
			                                    <div class="modal-header">
			                                        <button type="button" class="close pure-modal-close" data-dismiss="modal" aria-hidden="true">CLOSE X</button>
			                                        <h3 class="myModalLabel">Edit Your Primary Email Address</h3>
			                                    </div>
			                                    <div class="modal-body">
			                                        <div class="span12">
			                                            <h3>SELECT PRIMARY EMAIL ADDRESS</h3>
			                                              <apex:actionfunction name="selectedPrimaryMailingId" action="{!dummy}" rerender="dummy">
			                                            	<apex:param name="param1" value="" assignto="{!strPrimaryMailAddId}"/>
			                                              </apex:actionfunction>
			                                              <apex:actionfunction name="DeleteEmailAddress" action="{!deleteEmailAddress}" rerender="dummy">
			                                            	<apex:param name="param1" value="" assignto="{!strDeletedEmailAddress}"/>
			                                              </apex:actionfunction>
			                                              
			                                            <div id="EmailId">  
				                                            <div class="email-options">
				                                            	<script>
																	function setEditEmailVal(contId,isPrimary)
																	{
																		var strEmail = $('#' + contId).find('.account-email').text();
																		if(strEmail != '')
																		   editEmailAddr(strEmail,'Email',contId)
																	}
																</script>
			                                                	<apex:actionFunction action="{!newAddresAdd}" name="editEmailAddr" rerender="dummy">
			                                                		<apex:param name="param1" value="" assignTo="{!strNewEmail}"/>
			                                                		<apex:param name="param2" value="" assignTo="{!strAddresType}"/>
			                                                		<apex:param name="param3" value="" assignTo="{!contInfoId}"/>
			                                                	</apex:actionFunction>
			                                                	<apex:actionFunction action="{!newAddresAdd}" name="editEmail" rerender="dummy">
			                                                		<apex:param name="param1" value="" assignTo="{!strNewEmail}"/>
			                                                		<apex:param name="param2" value="" assignTo="{!strAddresType}"/>
			                                                		<apex:param name="param3" value="" assignTo="{!strNewlyCreatedContactInfoId}"/>
			                                                	</apex:actionFunction>
		<!-- 		                                                <apex:outputpanel id="pnlEmail"> -->
					                                                <apex:repeat value="{!lstEmailTypeContactInfo}" var="memEmailAddresAll"> 
					                                                	<apex:outputpanel rendered="{!IF(memEmailAddresAll.Email__c != '',true,false)}">
						                                                	<div class="option active-email-modal">
								                                                <label class="radio">
					                                                            	<input type="radio" name="optionsRadios6"/>
								                                                    <div class="email-option" id="{!memEmailAddresAll.Id}"><span contenteditable="false" class="account-email">{!memEmailAddresAll.Email__c}</span></div>    
								                                                </label>
									                                             <span class="brackets">[</span><a href="" class="edit-tag noli"> <span class="original-text"><i class="fa fa-pencil"></i></span>
																				 <span class="active-text hidden" id="{!memEmailAddresAll.Id}" onclick="setEditEmailVal(this.id,false)"><i class="icon fa fa-check fa-1x"></i></span></a><span class="brackets">]</span>
																				  <a href="#" class="remove-item" id="DeleteEmail_{!memEmailAddresAll.Id}"><i class="fa fa-times text-error"></i></a>
								                                             </div>   
								                                             <script>
							                                               		var isPrimary = '{!memEmailAddresAll.Is_Primary__c}';
							                                               		var recordId = '{!memEmailAddresAll.Id}';
							                                               		if(isPrimary == 'true')
							                                               		{
							                                               			var item = document.getElementById(recordId);
							                                               			item.previousSibling.previousSibling.checked = 'checked';
							                                               		}	
							                                                </script>
						                                                </apex:outputpanel>
					                                                </apex:repeat>
				                                            </div>
			                                            </div>
														<form >
				                                            <fieldset>
				                                                <label class="login-label"><h3>ADD NEW EMAIL ADDRESS:</h3></label>
				                                                <apex:inputText id="new-email1" html-class="email-input" html-type="email" html-placeholder="" value="{!strNewEmail}"/>
				
				                                                <label class="login-label"><h3>CONFIRM NEW EMAIL ADDRESS:</h3></label>
				                                                <apex:inputText id="new-email2" html-type="email" html-placeholder="" value="{!strConfirmNewEmail}"/>
																<input type="button" Class="add-email-btn" value="ADD EMAIL"/>
				                                            </fieldset>
			                                            </form>
			                                        </div>
			                                    </div>
			                                    <div class="modal-footer">
			                                        <button class="btn btn-pure-cancel" data-dismiss="modal" aria-hidden="true">CANCEL</button>
			                                        <button id="new-primary-email" class="btn btn-pure" onclick="selectedPrimaryMailingId($('#EmailId').find('.email-options input[type=radio]:checked').next('.email-option').attr('id'));">CONTINUE <i class="fa fa-caret-right"></i></button>
			                                    </div>
			                                </div>
			                                <!-- modal ends here -->
			                            </div>
			                        </dl>
			                        <dl class="span6">
			                            <div id="user-primary-phone" class="member-info-container">
			                                <dt>PHONE NUMBER:</dt>
			                                <div class="primary-phone-options">
			                                    <apex:repeat value="{!lstPhoneTypeContactInfo}" var="memPhoneAddres">
			                                    	<apex:outputPanel rendered="{!if(AND(OR(memPhoneAddres.Type__c == 'Phone-Home',memPhoneAddres.Type__c == 'Phone-Work',memPhoneAddres.Type__c == 'Phone-Mobile'),memPhoneAddres.Phone__c != ''),true,false)}">
			                                    		<dd id="dd_{!memPhoneAddres.Id}" class="{!if(memPhoneAddres.Is_Primary__c,'active-phone','')}"><i class="{!if(memPhoneAddres.Is_Primary__c,'icon fa fa-check fa-1x','')}"></i> <span class="phone-type"><span style="display:{!IF(memPhoneAddres.Type__c == 'Phone-Home','','none;')}">HOME</span><span style="display:{!IF(memPhoneAddres.Type__c == 'Phone-Work','','none;')}">WORK</span><span style="display:{!IF(memPhoneAddres.Type__c == 'Phone-Mobile','','none;')}">MOBILE</span></span>: <span class="phone-number">{!memPhoneAddres.Phone__c}</span></dd>
			                                    	</apex:outputPanel>
			                                    </apex:repeat>
			                                    <apex:outputpanel rendered="{!IF(lstPhoneTypeContactInfo.size == 0,true,false)}">
			                                    	<dd class="active-phone"><i class="icon fa fa-check fa-1x"></i><span class="phone-number" style="word-wrap:break-word;">{!strPrimaryPhone}</span></dd>
			                                    </apex:outputpanel>	
			                                    
			                                    <dd class="" style="display:{!If($Profile.Name != 'Pure Customer Community Login User','none;','')}"><a href="#editPhone" class="bracket-link" data-toggle="modal">[<i class="icon icon-resize fa fa-pencil"></i>]</a></dd>
			                                </div>
			                                <!-- modal begins here  -->
			                                <div id="editPhone" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="editPhonelabel" aria-hidden="hidden">
			                                    <div class="modal-header">
			                                        <button type="button" class="close pure-modal-close" data-dismiss="modal" aria-hidden="true">CLOSE X</button>
			                                        <h3 class="myModalLabel">Edit Your Phone Number</h3>
			                                    </div>
			                                    <div class="modal-body">
			                                        <div class="span12">
			                                            <h3>SELECT PRIMARY PHONE NUMBER</h3>
			                                             <apex:actionfunction name="selectedPrimaryPhoneAddressId" action="{!dummy}" rerender="dummy">
			                                            	<apex:param name="param1" value="" assignto="{!strPrimaryPhoneAddId}"/>
			                                              </apex:actionfunction>
			                                            <div class="phone-options">
			                                            	<script> 
																function setEditPhoneVal(contId,isPrimary)
																{
																	var phoneId = 'account-phone_' + contId;
																	var strPhone = document.getElementById(phoneId).innerHTML;
																	var e = document.getElementById(contId);
	                                                                var strSelectedOption = e.options[e.selectedIndex].value;
	                                                                editPhoneAddr(strPhone,strSelectedOption,contId)
																}
															</script>
		                                                	<apex:actionFunction action="{!newAddresAdd}" name="editPhoneAddr" rerender="dummy">
		                                                		<apex:param name="param1" value="" assignTo="{!strNewPhone}"/>
		                                                		<apex:param name="param2" value="" assignTo="{!strAddresType}"/>
		                                                		<apex:param name="param3" value="" assignTo="{!contInfoId}"/>
		                                                	</apex:actionFunction>
		                                                	<apex:actionFunction action="{!newAddresAdd}" name="editPhone" rerender="dummy">
		                                                		<apex:param name="param1" value="" assignTo="{!strNewPhone}"/>
		                                                		<apex:param name="param2" value="" assignTo="{!strAddresType}"/>
		                                                		<apex:param name="param3" value="" assignTo="{!strNewlyCreatedContactInfoId}"/>
		                                                	</apex:actionFunction>
		                                                	<apex:actionFunction action="{!deletePhoneAddress}" name="delPhoneAddress" rerender="dummy">
		                                                		<apex:param name="param1" value="" assignTo="{!strDeletedPhoneAddress}"/>
		                                                	</apex:actionFunction>
				                                               <apex:repeat value="{!lstPhoneTypeContactInfo}" var="memPhoneAddresAll">
					                                                <apex:outputpanel rendered="{!if(AND(OR(memPhoneAddresAll.Type__c == 'Phone-Home',memPhoneAddresAll.Type__c == 'Phone-Work',memPhoneAddresAll.Type__c == 'Phone-Mobile'),memPhoneAddresAll.Phone__c != ''),true,false)}">
																		<div class="option active-phone-modal">				                                                
							                                                <label class="radio" style="width:288px;">
							                                                    <input type="radio" name="optionsRadios7" id="optionsRadios1" value="option1"/>
							                                                    <div class="phone-option">
								                                                    <select disabled="disabled" id="{!memPhoneAddresAll.Id}" class="selectClass phone-option-select">
								                                                            <option disabled="disabled">SELECT PHONE TYPE</option>
								                                                            <apex:outputpanel rendered="{!if(memPhoneAddresAll.Type__c == 'Phone-Home',true,false)}">
								                                                            	 <option selected="selected">HOME</option>
								                                                            </apex:outputpanel>
								                                                             <apex:outputpanel rendered="{!if(memPhoneAddresAll.Type__c != 'Phone-Home',true,false)}">
								                                                            	 <option>HOME</option>
								                                                            </apex:outputpanel>
								                                                            <apex:outputpanel rendered="{!if(memPhoneAddresAll.Type__c == 'Phone-Mobile',true,false)}">
								                                                            	 <option selected="selected">MOBILE</option>
								                                                            </apex:outputpanel>
								                                                             <apex:outputpanel rendered="{!if(memPhoneAddresAll.Type__c != 'Phone-Mobile',true,false)}">
								                                                            	 <option>MOBILE</option>
								                                                            </apex:outputpanel>
								                                                            <apex:outputpanel rendered="{!if(memPhoneAddresAll.Type__c == 'Phone-Work',true,false)}">
								                                                            	 <option selected="selected">WORK</option>
								                                                            </apex:outputpanel>
								                                                             <apex:outputpanel rendered="{!if(memPhoneAddresAll.Type__c != 'Phone-Work',true,false)}">
								                                                            	 <option>WORK</option>
								                                                            </apex:outputpanel>
								                                                    </select>
								                                                    <div contenteditable="false" class="account-phone phone-number-edit">
								                                                    	<span contenteditable="false" class="phone-number" id="account-phone_{!memPhoneAddresAll.Id}">{!memPhoneAddresAll.Phone__c}</span>
								                                                    </div>
							                                                    </div>    
							                                                </label>
							                                                 <span class="brackets">[</span><a href="" class="edit-tag noli"> <span class="original-text"><i class="fa fa-pencil"></i></span><span class="active-text hidden" id="{!memPhoneAddresAll.Id}" onclick="setEditPhoneVal(this.id,false)"><i class="icon fa fa-check fa-1x"></i></span></a>
							                                                 <a href="#" class="remove-item" id="DeletePhone_{!memPhoneAddresAll.Id}"><i class="fa fa-times text-error"></i></a><span class="brackets">]</span>
						                                                </div>
						                                                
						                                                <script>
							                                               		var isPrimary = '{!memPhoneAddresAll.Is_Primary__c}';
							                                               		var recordId = '{!memPhoneAddresAll.Id}';
							                                               		if(isPrimary == 'true')
							                                               		{
							                                               			var item = document.getElementById(recordId);
							                                               			item.parentNode.previousSibling.previousSibling.checked = 'checked';
							                                               		}	
							                                           </script>
					                                                </apex:outputpanel>
				                                                </apex:repeat>
			                                            </div>
														<form>
				                                            <fieldset>
				                                                <label class="login-label"><h3>ADD NEW PHONE NUMBER:</h3></label>
				                                                <apex:inputText id="new-phone" html-class="phone-input" html-type="text" html-placeholder="" value="{!strNewPhone}"/>
				                                                <select id="new-phone-type" >
				                                                    <option disabled="disabled">Please Select Phone Number</option>
				                                                    <option>HOME</option>
				                                                    <option>MOBILE</option>
				                                                    <option>WORK</option>
				                                                </select>
				                                                <br/>
		<!-- 		                                                <input class="add-phone-btn" type="submit" value="ADD PHONE NUMBER"/> -->
				                                                <input type="button" Class="add-phone-btn" value="ADD PHONE NUMBER" />
				                                            </fieldset>
			                                            </form>
			                                        </div>
			
			                                    </div>
			                                    <div class="modal-footer">
			                                        <button class="btn btn-pure-cancel" data-dismiss="modal" aria-hidden="true">CANCEL</button>
			                                        <button id="new-primary-phone" class="btn btn-pure" onclick="selectedPrimaryPhoneAddressId($('.phone-options input[type=radio]:checked').next('.phone-option').find('.selectClass').attr('id'));">CONTINUE <i class="fa fa-caret-right"></i></button>
	<!-- 		                                         -->
			                                    </div>
			                                </div>
			                                <!-- modal ends here -->
			
			                            </div>
			                        </dl>
			                    </div>
			                    <apex:actionfunction name="afProfileSaveChanges" action="{!profileSaveChanges}" rerender="dummy,errorMessageId"/>
			                    <apex:actionfunction name="updatedSelectedDelPref" action="{!delivaryPreferencesSaveChanges}"/>
			                    
			                    <a href="" class="btn btn-pure" type="button" onclick="afProfileSaveChanges()" style="display:{!If($Profile.Name != 'Pure Customer Community Login User','none;','')}">SAVE CHANGES <i class="fa fa-caret-right"></i></a>
			                </div>
			            </div>
			<!-- End editable member-info -->
	            <a name="deliverySection"></a>
	             <!-- Begin Delivery Preferences -->  
	            
	            <div class="table-header mobile-section-title arrow-container">
		    		<h1 class="table-h1-title">Delivery Preference</h1>
		    		<div class="rotate-caret mobile"><i class="fa fa-caret-right fa-2x"></i></div>
				</div> 
				<div class="mobile-expandable-div">
				      <div class="unit-full-container row-fluid" id="standardMailId">
				        <div class="span12 unit-content">
	<!-- 			            <form> -->
				              <fieldset>
				                <legend>Delivery Preference For Policy Documents and Bills.</legend>
				                <label> <p>You currently receive your documents through <strong>standard mail</strong>. Your documents are being sent to the address(es) noted as primary mailing and primary billing in the section above.</p></label>
				                <label class="checkbox">
				                  <input type="checkbox" value="" id="deliveryStandardMailId"> <p>I wish to change my delivery method to <strong>eDelivery</strong>. <img class="tiny-e-leaf" src="{!URLFOR($Resource.SL_PureInsuranceResources,'images/e-leaf.png')}"></img></p></input>
				                  <p>If you select this option, your documents will be sent to the email address noted as the primary in the section above.</p>
				                  <script>
				                  	if('{!$Profile.Name}' != 'Pure Customer Community Login User')
				                  		document.getElementById("deliveryStandardMailId").disabled = true;
				                  </script>
				                </label>
				                <br />
				                <button class="btn btn-pure" onclick="checkDeliverypreference('deliveryStandardMailId');" style="display:{!If($Profile.Name != 'Pure Customer Community Login User','none;','')}">SAVE CHANGES <i class="fa fa-caret-right"></i></button>
				              </fieldset>
	<!-- 			            </form> -->
				         </div>
					   </div>
					   
					 <!-- This is set at display none -->
				     <div class="unit-full-container row-fluid not-displayed" id="eDeliveryId">
				        <div class="span12 unit-content">
	<!-- 			            <form> -->
				              <fieldset>
				                <legend>Delivery Preference For Policy Documents and Bills.</legend>
				                <label> <p>You currently receive your documents through <strong>eDelivery</strong>. Your documents are being sent to the email address noted as the primary in the section above.</p></label>
				                <label class="checkbox">
				                   <input type="checkbox" value="" id="deliveryEmailId"> <p>I wish to change my delivery method to <strong>Standard Mail</strong>.</p></input>
				                  <p>If you select this option, your documents will be sent to the address(es) noted as primary mailing and primary billing in the section above.</p>
				                   <script>
				                  		if('{!$Profile.Name}' != 'Pure Customer Community Login User')
				                  			document.getElementById("deliveryEmailId").disabled = true;
				                   </script>
				                </label>
				                <br />
				                <button class="btn btn-pure" onclick="checkDeliverypreference('deliveryEmailId');" style="display:{!If($Profile.Name != 'Pure Customer Community Login User','none;','')}">SAVE CHANGES <i class="fa fa-caret-right"></i></button>
				              </fieldset>
	<!-- 			            </form> -->
				        </div>
				    </div>
				     <script>
	                	var memberDeliveryPreference = '{!objAccount.Billing_Document_Delivery_Method__c}';
	                    if( memberDeliveryPreference == 'Electronic' || memberDeliveryPreference == 'Both' || memberDeliveryPreference == '')
	                    {
	                    	 $('#eDeliveryId').removeClass('not-displayed');
	                    	 $('#standardMailId').addClass('not-displayed');
	                    }	 
	                 </script>
				</div>
				<script>
					function checkDeliverypreference(elementId)
					{
						if($("#" + elementId).is(":checked")) 
						{
							updatedSelectedDelPref();
					    }
					}
				</script>
				<!-- End Delivery Preferences -->  
					<!-- Begin Communication Preferences -->
	                <div class="table-header mobile-section-title arrow-container">
					    <h1 class="table-h1-title">Communication Preferences</h1>
					    <div class="rotate-caret mobile"><i class="fa fa-caret-right fa-2x"></i></div>
					</div>
	                <div class="mobile-expandable-div">
					    <div class="unit-full-container row-fluid">
					        <div class="span12 unit-content">   
					            <div class="unit-full-title desktop">
					                <h1>Communication Preferences </h1> 
					            </div>        
					            <p class="unit-full-sub-header">Following is a list of just some of the marketing communications that PURE distributes.</p>
					            <p>PURE’s preferred method of communication is email however we do offer standard mail delivery for the Annual Report to Members and Subscriber Savings Account (SSAs) statements. If you prefer to receive these via standard mail, please note that below.</p>
	            				<p>If you would like to receive electronic copies of our other communications sent to multiple email addresses, please note that below. (Note: SSAs can be sent to only one addresses, print or email.)</p>
	            				
					            <form>
						            <div class="unit-sub-divide radio-w-checkbox">
							            <h3>Annual Member Communications</h3>
							                <p class="lead sub-lead">Annual Report to Members</p>
							                 <div class="radio-checkbox-option">
								                <label class="radio">
								                    <input type="radio" name="optionsRadios" id="AnnualEmail" value="option1" />
							                        <strong>Email</strong>
							                        <script>
				                  						if('{!$Profile.Name}' != 'Pure Customer Community Login User')
				                  							document.getElementById("AnnualEmail").disabled = true;
				                   					</script>
							                    </label>     
						                        <div class="checkbox-options">
					                                <apex:repeat value="{!lstEmailTypeContactInfo}" var="memEmailCommPre">
					                                	<apex:outputpanel rendered="{!IF(memEmailCommPre.Email__c != '',true,false)}">
					                                		<label class="checkbox">
				                                				<input type="checkbox" id="{!memEmailCommPre.Id}_AnnualEmail" value="" disabled="disabled"/>{!memEmailCommPre.Email__c}
				                                		    </label>
				                                			<script>
					                                			var isAnnualReportToMember = '{!memEmailCommPre.Receive_Annual_Report__c}';
					                                			var contInfoId = '{!memEmailCommPre.Id}' + '_AnnualEmail';
					                                			if( isAnnualReportToMember == 'true')
					                                			{
					                                				document.getElementById(contInfoId).checked = 'checked';
					                                				document.getElementById('AnnualEmail').checked = 'checked';
					                                			}
					                                			if('{!$Profile.Name}' != 'Pure Customer Community Login User')
					                                				document.getElementById(contInfoId).disabled = true;
					                                			
				                                			</script>
					                                	</apex:outputpanel>
					                                </apex:repeat>
					                                <apex:outputpanel rendered="{!IF(lstEmailTypeContactInfo.size == 0,true,false)}">
					                                	<span>No emails found</span>
					                                </apex:outputpanel>
			                                     </div>
			                                   </div>
			                                      
					                            <div class="radio-checkbox-option">    
									                <label class="radio">
									                    <input type="radio" name="optionsRadios" id="AnnualStandardMail" value="option1" />
									                    <strong>Standard Mail</strong>
									                    <script>
									                    	if('{!$Profile.Name}' != 'Pure Customer Community Login User')
				                  								document.getElementById("AnnualStandardMail").disabled = true;
									                    </script>
									                 </label>  
									                  <div class="checkbox-options">
							                                <apex:repeat value="{!lstStandardEmailContactInfo}" var="memMailCommPre">
							                                	<apex:outputpanel rendered="{!IF(OR(memMailCommPre.Street__c != '',memMailCommPre.Street_2__c != '',memMailCommPre.City__c != '',memMailCommPre.State__c != '',memMailCommPre.Zip__c != ''),true,false)}">
							                                		<label class="checkbox">
							                                			<input type="checkbox" id="{!memMailCommPre.id}_AnnualStndMail" value="option1" disabled="disabled"/>{!memMailCommPre.Street__c} {!memMailCommPre.Street_2__c}<span style="display:{!IF(memMailCommPre.City__c == '','','none;')}">,</span><span style="display:{!IF(memMailCommPre.City__c != '','','none;')}"> {!memMailCommPre.City__c},</span> {!memMailCommPre.State__c} {!memMailCommPre.Zip__c}
							                                		</label>
						                                			<script>
							                                			var isAnnualReportToMember = '{!memMailCommPre.Receive_Annual_Report__c}';
							                                			var contInfoId = '{!memMailCommPre.Id}' + '_AnnualStndMail';
							                                			if( isAnnualReportToMember == 'true')
							                                			{
							                                				document.getElementById(contInfoId).checked = 'checked';
							                                				document.getElementById('AnnualStandardMail').checked = 'checked';
							                                			}
							                                			if('{!$Profile.Name}' != 'Pure Customer Community Login User')
				                  											document.getElementById(contInfoId).disabled = true;
							                                		</script>
							                                	 </apex:outputpanel>	
							                                </apex:repeat>
							                                <apex:outputpanel rendered="{!IF(lstStandardEmailContactInfo.size == 0,true,false)}">
						                                		<span>No standard mails found</span>
							                                </apex:outputpanel>
								                      </div>  
								                 </div>
							                <div class="radio-checkbox-option">               
								                <label class="radio">
								                    <input type="radio" name="optionsRadios" id="AnnualEmailAndStandardEmail" value="option1"/>
								                    <strong>Both email and Standard Mail</strong>
								                      <script>
									                      if('{!$Profile.Name}' != 'Pure Customer Community Login User')
				                  							 document.getElementById("AnnualEmailAndStandardEmail").disabled = true;
									                 </script>
								                </label>   
								                <div class="checkbox-options">  
													<apex:repeat value="{!lstEmailTypeContactInfo}" var="memAllEmailCommPref">
														<apex:outputpanel rendered="{!IF(memAllEmailCommPref.Email__c != '',true,false)}">
					                                	 	 <label class="checkbox">
							                                	<input type="checkbox" id="{!memAllEmailCommPref.id}_AnnualBoth" value="" disabled="disabled"/>{!memAllEmailCommPref.Email__c}
							                                 </label>
							                                 <script>
					                                			var isAnnualReportToMember = '{!memAllEmailCommPref.Receive_Annual_Report__c}';
					                                			var contInfoId = '{!memAllEmailCommPref.Id}' + '_AnnualBoth';
					                                			if( isAnnualReportToMember == 'true')
					                                			{
					                                				document.getElementById(contInfoId).checked = 'checked';
					                                				document.getElementById('AnnualEmail').checked = 'checked';
					                                			}
					                                			if('{!$Profile.Name}' != 'Pure Customer Community Login User')
				                  							    	document.getElementById(contInfoId).disabled = true;
					                                		</script> 
				                                		</apex:outputpanel>
					                                </apex:repeat>
					                                <apex:repeat value="{!lstEmailAndStndEmailContactInfo}" var="memAllCommPre">
							                             <apex:outputpanel rendered="{!IF(OR(memAllCommPre.Type__c='Mailing',memAllCommPre.Type__c='Billing'),true,false)}">
							                             	<apex:outputpanel rendered="{!IF(OR(memAllCommPre.Street__c != '',memAllCommPre.Street_2__c != '',memAllCommPre.City__c != '',memAllCommPre.State__c != '',memAllCommPre.Zip__c != ''),true,false)}">
								                             	<label class="checkbox">
								                                	<input type="checkbox" id="{!memAllCommPre.id}_AnnualBoth" value="" disabled="disabled"/>{!memAllCommPre.Street__c} {!memAllCommPre.Street_2__c} <span style="display:{!IF(memAllCommPre.City__c != '','','none;')}">  {!memAllCommPre.City__c},</span> {!memAllCommPre.State__c} {!memAllCommPre.Zip__c}
								                                </label>	
							                                    <script>
						                                			var isAnnualReportToMember = '{!memAllCommPre.Receive_Annual_Report__c}';
						                                			var contInfoId = '{!memAllCommPre.Id}' + '_AnnualBoth';
						                                			if( isAnnualReportToMember == 'true')
						                                			{
						                                				document.getElementById(contInfoId).checked = 'checked';
						                                				
						                                				if($("#AnnualEmail").is(":checked")) 
						                                				{
						                                					if('{!memAllCommPre.Type__c}' != 'Email')
						                                						document.getElementById('AnnualEmailAndStandardEmail').checked = 'checked';
						                                				}
						                                				
						                                				if($("#AnnualStandardMail").is(":checked")) 
						                                				{
						                                					if('{!memAllCommPre.Type__c}' == 'Email')
						                                						 document.getElementById('AnnualEmailAndStandardEmail').checked = 'checked';
						                                				}
						                                			}
					                                		    </script>
					                                		 </apex:outputpanel>   
							                             </apex:outputpanel>  
					                                </apex:repeat>
					                                 <apex:outputpanel rendered="{!IF(lstEmailAndStndEmailContactInfo.size == 0,true,false)}">
				                                		<span>No emails or standard mails found</span>
					                                </apex:outputpanel>
					                            </div>
					                        </div>      
						            </div>
						            <script>
						            	if($("#AnnualEmail").is(":checked"))
						            	{
						            		var strEmailIds =  '{!lstEmailTypeContactInfo}'.replace('[','').replace(']','');
                     						var lstEmailIds = new Array();
                     						lstEmailIds = strEmailIds.split(",");
                     						
                     						for( i=0; i<lstEmailIds.length;i++)
						            		{
					            				var emailId = lstEmailIds[i];
					            				emailId = emailId.trim() + '_AnnualEmail';
					            				
					            				if('{!$Profile.Name}' == 'Pure Customer Community Login User')
					            					document.getElementById(emailId).removeAttribute("disabled");
						            		}		
                     						
						            	}
						            	
						            	if($("#AnnualStandardMail").is(":checked"))
						            	{
						            		var stndEmails = '{!lstStandardEmailContactInfo}'.replace('[','').replace(']','');
						            	    var lstStndEmailIds = new Array();
		                     				lstStndEmailIds = stndEmails.split(",");
													
											for( i=0; i<lstStndEmailIds.length;i++)
						            		{
					            				var emailId = lstStndEmailIds[i];
					            				emailId = emailId.trim() + '_AnnualStndMail';	
					            				if('{!$Profile.Name}' == 'Pure Customer Community Login User')
					            					document.getElementById(emailId).removeAttribute("disabled");
						            		}													
						            	}
						            	
						            	if($("#AnnualEmailAndStandardEmail").is(":checked"))
						            	{
						            		var strBothEmailAndStdMailIds =  '{!lstEmailAndStndEmailContactInfo}'.replace('[','').replace(']','');
                   							var lstEmailAndStndMailIds = new Array();
                   							lstEmailAndStndMailIds = strBothEmailAndStdMailIds.split(",");
		                     							
                   							for( i=0; i<lstEmailAndStndMailIds.length;i++)
					            			{
					            				var emailId = lstEmailAndStndMailIds[i];
					            				emailId = emailId.trim() + '_AnnualBoth';
					            				if('{!$Profile.Name}' == 'Pure Customer Community Login User')
					            					document.getElementById(emailId).removeAttribute("disabled");
					            			}	
												
						            	}
						            	
						            </script>
						            <div class="unit-sub-divide radio-w-checkbox">
						                <p class="lead sub-lead">Subscriber Savings Account Statements </p>
						                <div class="radio-checkbox-option">
							                <label class="radio">
							                    <input type="radio" name="optionsRadiosSSA" id="SubscriberEmail" value="option1" />
						                        <strong>Email</strong><br/>
						                         <script>
									                   if('{!$Profile.Name}' != 'Pure Customer Community Login User')
				                  							document.getElementById("SubscriberEmail").disabled = true;
									             </script>
						                    </label>
						                    <div class="radio-options">   
				                                <apex:repeat value="{!lstEmailTypeContInfoForSSA}" var="Subscriber">
				                                	<apex:outputpanel rendered="{!IF(Subscriber.Email__c != '',true,false)}">
					                                	<label class="radio">
					                                		<input type="radio" name="SSAEM" id="{!Subscriber.Id}_SubscriberEmail" value="option1"/>{!Subscriber.Email__c}
					                                	</label>
			                                	    </apex:outputpanel>
			                                	    <script>
			                                	    	var isPureSSA = '{!Subscriber.Receive_SSA_Statements__c}';
			                                	    	var contInfoId = '{!Subscriber.Id}' + '_SubscriberEmail';
			                                			if( isPureSSA == 'true')
			                                			{
			                                				document.getElementById(contInfoId).checked = 'checked';
			                                				document.getElementById('SubscriberEmail').checked = 'checked';
			                                			}
			                                			if('{!$Profile.Name}' != 'Pure Customer Community Login User')
			                                	    		document.getElementById(contInfoId).disabled = true;
			                                	    </script>
				                                </apex:repeat>
				                                 <apex:outputpanel rendered="{!IF(lstEmailTypeContactInfo.size == 0,true,false)}"> 
		                                		  	<span>No emails found</span>
				                                </apex:outputpanel>
				                            </div>         
						                 </div>  
						                 <div class="radio-checkbox-option">               
							                 <label class="radio">
							                    <input type="radio" name="optionsRadiosSSA" id="SubscriberStandardMail" value="option1" />
						                        <strong>Standard Mail</strong><br/>
						                           <script>
									                   if('{!$Profile.Name}' != 'Pure Customer Community Login User')
				                  							document.getElementById("SubscriberStandardMail").disabled = true;
									             </script>
						                     </label>
						                      <div class="radio-options"> 
							                     <apex:repeat value="{!lstMailingTypeContInfoForSSA}" var="memMailCommPre">
				                                	<apex:outputpanel rendered="{!IF(OR(memMailCommPre.Street__c != '',memMailCommPre.Street_2__c != '',memMailCommPre.City__c != '',memMailCommPre.State__c != '',memMailCommPre.Zip__c != ''),true,false)}">
				                                		<label class="radio">
				                                			<input type="radio" id="{!memMailCommPre.id}_SubscriberStndMail" value="option1" name="SSASM"/>{!memMailCommPre.Street__c} {!memMailCommPre.Street_2__c}<span style="display:{!IF(memMailCommPre.City__c == '','','none;')}">,</span><span style="display:{!IF(memMailCommPre.City__c != '','','none;')}"> {!memMailCommPre.City__c},</span> {!memMailCommPre.State__c} {!memMailCommPre.Zip__c}
				                                		</label>
				                                   </apex:outputpanel>
				                                   <script>
			                                	    	var isPureSSA = '{!memMailCommPre.Receive_SSA_Statements__c}';
			                                	    	var contInfoId = '{!memMailCommPre.Id}' + '_SubscriberStndMail';
			                                			if( isPureSSA == 'true')
			                                			{
			                                				if(!document.getElementById('SubscriberEmail').checked)
			                                				{
			                                					document.getElementById(contInfoId).checked = 'checked';
			                                					document.getElementById('SubscriberStandardMail').checked = 'checked';
			                                				}	
			                                			}
			                                			
			                                			if('{!$Profile.Name}' != 'Pure Customer Community Login User')
			                                	    		document.getElementById(contInfoId).disabled = true;
			                                	    		
			                                	   </script>
				                                </apex:repeat>
				                                <apex:outputpanel rendered="{!IF(lstMailingTypeContactInfo.size == 0,true,false)}"> 
		                                		  	<span>No mailing addresses found</span>
				                                </apex:outputpanel>
								              </div>                  
				                         </div>  
						              </div>
						            <div class="unit-sub-divide alert-checkbox-w-radio">
						            	 <h3>Other Optional Email Communications</h3>
						                <p class="lead sub-lead">PURE Situation Room<sup style="font-size:11px;font-weight:bold;margin-left:2px;">TM</sup></p>
						                <p class="fine-description"><small>Tools &amp; information to help during severe weather and other emergencies.</small></p>
						
						                <label class="checkbox">
						                    <input type="checkbox" name="optionsRadios2" id="PureSituationRoom" value="" />
						                     <strong>Enrolled</strong>
						                     <script>
						                     	if('{!$Profile.Name}' != 'Pure Customer Community Login User')
			                                	    document.getElementById('PureSituationRoom').disabled = true;
						                     </script>
						                </label>
						                <div class="radio-options">     
			                                <apex:repeat value="{!lstEmailTypeContactInfo}" var="SRoom">
			                                	<apex:outputpanel rendered="{!IF(SRoom.Email__c != '',true,false)}">
				                                	<label class="checkbox">
				                                		<input type="checkbox" disabled="disabled" id="{!SRoom.Id}_PureSituation" value="option1" name="enrolled1"/>{!SRoom.Email__c}
				                                	</label>
				                                	<script>
			                                			var isPureSituation = '{!SRoom.Receive_PURE_Situation_Room__c}';
			                                			var contInfoId = '{!SRoom.Id}' + '_PureSituation';
			                                			if( isPureSituation == 'true')
			                                			{
			                                				document.getElementById(contInfoId).checked = 'checked';
			                                				document.getElementById('PureSituationRoom').checked = 'checked';
			                                			}
			                                			if('{!$Profile.Name}' != 'Pure Customer Community Login User')
			                                	    		document.getElementById(contInfoId).disabled = true;
			                                	    </script> 	
		                                	    </apex:outputpanel>  
			                                </apex:repeat>
			                                 <apex:outputpanel rendered="{!IF(lstEmailTypeContactInfo.size == 0,true,false)}">
		                                		<span>No emails found</span>
			                                </apex:outputpanel>
						                </div>                
						            </div>
						            <div class="unit-sub-divide alert-checkbox-w-radio">
						                <p class="lead sub-lead">PURE Prevention</p>
						                <p class="fine-description"><small>Insights from Member Advocates and special offers to help you reduce risk.</small></p>
							                <label class="checkbox">
							                    <input type="checkbox" name="optionsRadios5" id="PurePrevention" value="option1" />
						                        <strong>Enrolled</strong>
						                          <script>
						                     		if('{!$Profile.Name}' != 'Pure Customer Community Login User')
			                                	    	document.getElementById('PurePrevention').disabled = true;
  						                     	 </script>
						                    </label> 
						                     <div class="radio-options">   
				                                <apex:repeat value="{!lstEmailTypeContactInfo}" var="Prevent">
				                                	<apex:outputpanel rendered="{!IF(Prevent.Email__c != '',true,false)}">
					                                	<label class="checkbox">
					                                		<input type="checkbox" disabled="disabled" name="enrolled2" id="{!Prevent.Id}_PurePrevention" value="option1"/>{!Prevent.Email__c}
					                                	</label>
					                                	<script>
				                                			var isPurePrevention = '{!Prevent.Receive_PURE_Prevention__c}';
				                                			var contInfoId = '{!Prevent.Id}' + '_PurePrevention';
				                                			if( isPurePrevention == 'true')
				                                			{
				                                				document.getElementById(contInfoId).checked = 'checked';
				                                				document.getElementById('PurePrevention').checked = 'checked';
				                                			}
				                                			if('{!$Profile.Name}' != 'Pure Customer Community Login User')
			                                	    			document.getElementById(contInfoId).disabled = true;
				                                	    </script>			
			                                	    </apex:outputpanel> 
				                                </apex:repeat>
				                                  <apex:outputpanel rendered="{!IF(lstEmailTypeContactInfo.size == 0,true,false)}"> 
			                                		  <span>No emails found</span>
				                                  </apex:outputpanel>
				                            </div>      
						            </div>
		<!-- 						            Script for Communication Preferences Section -->
						            <script>
						            	if($("#PurePrevention").is(":checked")) 
						            	{
												var strEmailIds =  '{!lstEmailTypeContactInfo}'.replace('[','').replace(']','');
												var lstEmailIds = new Array();
												lstEmailIds = strEmailIds.split(",");
												
												for( i=0; i<lstEmailIds.length;i++)
												{
													var emailId = lstEmailIds[i];
													emailId = emailId.trim() + '_PurePrevention';
													if('{!$Profile.Name}' == 'Pure Customer Community Login User')
														document.getElementById(emailId).removeAttribute("disabled");
												}		
										}
										if($("#PureSituationRoom").is(":checked")) 
					            		{
											var strEmailIds =  '{!lstEmailTypeContactInfo}'.replace('[','').replace(']','');
											var lstEmailIds = new Array();
											lstEmailIds = strEmailIds.split(",");
											
											for( i=0; i<lstEmailIds.length;i++)
											{
												var emailId = lstEmailIds[i];
												emailId = emailId.trim() + '_PureSituation';
												if('{!$Profile.Name}' == 'Pure Customer Community Login User')
													document.getElementById(emailId).removeAttribute("disabled");
											}		
										}
						            	function collectSelectedPreferences()
						            	{
						            	    var selectedItem = '';
						            	    var unSelectedItem = '';
						            	    var isSubscriberEmailSelected = false;
						            	    var isSubscriberStandardMailSelected = false;
						            	    
						            	    var strEmailIds =  '{!lstEmailTypeContactInfo}'.replace('[','').replace(']','');
                     						var lstEmailIds = new Array();
                     						lstEmailIds = strEmailIds.split(",");
		                     						
                     		                var stndEmails = '{!lstStandardEmailContactInfo}'.replace('[','').replace(']','');
						            	    var lstStndEmailIds = new Array();
		                     						lstStndEmailIds = stndEmails.split(",");
		                     						
						            		if($("#AnnualEmail").is(":checked")) 
						            		{
						            			for( i=0; i<lstEmailIds.length;i++)
						            			{
						            				var emailId = lstEmailIds[i];
						            				emailId = emailId.trim() + '_AnnualEmail';
													
						            				if($("#" + emailId).is(":checked"))
						            				{
						            					selectedItem = selectedItem + emailId + ',' ;
						            				}
						            				
						            				else 
						            				{
						            					unSelectedItem = unSelectedItem + emailId + ',' ;
						            				}
						            			}
						            			
						            			for(i=0; i<lstStndEmailIds.length;i++)
						            			{
						            				var emailId = lstStndEmailIds[i];
						            				emailId = emailId.trim() + '_AnnualStndMail';
						            				unSelectedItem = unSelectedItem + emailId + ',' ;
						            			}
						            		}
						            		
						            		if($("#AnnualStandardMail").is(":checked")) 
						            		{
												for( i=0; i<lstStndEmailIds.length;i++)
						            			{
						            				var emailId = lstStndEmailIds[i];
						            				emailId = emailId.trim() + '_AnnualStndMail';
						            				if($("#" + emailId).is(":checked"))
						            				{
						            					selectedItem = selectedItem + emailId + ',' ;
						            				}
						            				else 
						            				{
						            					unSelectedItem = unSelectedItem + emailId + ',' ;
						            				}
						            			}		
						            			
						            			for( i=0; i<lstEmailIds.length;i++)
						            			{
						            				var emailId = lstEmailIds[i];
						            				emailId = emailId.trim() + '_AnnualEmail';
						            				unSelectedItem = unSelectedItem + emailId + ',' ;
												}
						            		}
						            		
						            		if($("#AnnualEmailAndStandardEmail").is(":checked")) 
						            		{
						            		    var strBothEmailAndStdMailIds =  '{!lstEmailAndStndEmailContactInfo}'.replace('[','').replace(']','');
                     							var lstEmailAndStndMailIds = new Array();
                     							lstEmailAndStndMailIds = strBothEmailAndStdMailIds.split(",");
		                     							
                     							for( i=0; i<lstEmailAndStndMailIds.length;i++)
						            			{
						            				var emailId = lstEmailAndStndMailIds[i];
						            				emailId = emailId.trim() + '_AnnualBoth';
													
						            				if($("#" + emailId).is(":checked"))
						            				{
						            					selectedItem = selectedItem + emailId + ',';
						            				}
						            				else 
						            				{
						            					unSelectedItem = unSelectedItem + emailId + ',' ;
						            				}
						            			}
						            		}
						            		
						            		if($("#SubscriberEmail").is(":checked")) 
						            		{
						            		    var strBothEmailAndStdMailIds =  '{!lstEmailTypeContInfoForSSA}'.replace('[','').replace(']','');
                     							var lstEmailAndStndMailIds = new Array();
                     							lstEmailAndStndMailIds = strBothEmailAndStdMailIds.split(",");
                     							
						            			for( i=0; i<lstEmailAndStndMailIds.length;i++)
						            			{
						            				var emailId = lstEmailAndStndMailIds[i];
						            				emailId = emailId.trim() + '_SubscriberEmail';
													
						            				if($("#" + emailId).is(":checked"))
						            				{
						            					selectedItem = selectedItem + emailId + ',' ;
						            				}
						            				
						            				else 
						            				{
						            					unSelectedItem = unSelectedItem + emailId + ',' ;
						            				}
						            			}
						            			
						            			var strMailingIds =  '{!lstMailingTypeContInfoForSSA}'.replace('[','').replace(']','');
                     							var lstMailingIds = new Array();
                     							lstMailingIds = strMailingIds.split(",");
                     							for( i=0; i<lstMailingIds.length;i++)
						            			{
						            				var emailId = lstMailingIds[i];
						            				emailId = emailId.trim() + '_SubscriberStndMail';
					            					unSelectedItem = unSelectedItem + emailId + ',' ;
						            			 }
						            		}
						            		
						            		if($("#SubscriberStandardMail").is(":checked")) 
						            		{
						            			 var strMailingIds =  '{!lstMailingTypeContInfoForSSA}'.replace('[','').replace(']','');
                     							 var lstMailingIds = new Array();
                     							 lstMailingIds = strMailingIds.split(",");
                     							 
						            			 for( i=0; i<lstMailingIds.length;i++)
						            			 {
						            				var emailId = lstMailingIds[i];
						            				emailId = emailId.trim() + '_SubscriberStndMail';
													
						            				if($("#" + emailId).is(":checked"))
						            				{
						            					selectedItem = selectedItem + emailId + ',' ;
						            				}
						            				
						            				else 
						            				{
						            					unSelectedItem = unSelectedItem + emailId + ',' ;
						            				}
						            			 }
						            			 
						            			var strBothEmailAndStdMailIds =  '{!lstEmailTypeContInfoForSSA}'.replace('[','').replace(']','');
                     							var lstEmailAndStndMailIds = new Array();
                     							lstEmailAndStndMailIds = strBothEmailAndStdMailIds.split(",");
						            			 
						            			 for( i=0; i<lstEmailAndStndMailIds.length;i++)
						            			 {
						            				var emailId = lstEmailAndStndMailIds[i];
						            				emailId = emailId.trim() + '_SubscriberEmail';
						            				unSelectedItem = unSelectedItem + emailId + ',' ;
						            			 }	
						            		}
						            		
						            		if($("#PurePrevention").is(":checked")) 
						            		{
						            			for( i=0; i<lstEmailIds.length;i++)
						            			{
						            				var emailId = lstEmailIds[i];
						            				emailId = emailId.trim() + '_PurePrevention';
													
						            				if($("#" + emailId).is(":checked"))
						            				{
						            					selectedItem = selectedItem + emailId + ',' ;
						            					//selectedItems.push(emailId);
						            				}
						            				
						            				else 
						            				{
						            					unSelectedItem = unSelectedItem + emailId + ',' ;
						            				}
						            			}
						            		}
						            		
						            		else
						            		{
						            			for( i=0; i<lstEmailIds.length;i++)
						            			{
						            				var emailId = lstEmailIds[i];
						            				emailId = emailId.trim() + '_PurePrevention';
						            				unSelectedItem = unSelectedItem + emailId + ',' ;
						            			}
						            		}
						            		
						            		if($("#PureSituationRoom").is(":checked")) 
						            		{
						            			for( i=0; i<lstEmailIds.length;i++)
						            			{
						            				var emailId = lstEmailIds[i];
						            				emailId = emailId.trim() + '_PureSituation';
													
						            				if($("#" + emailId).is(":checked"))
						            				{
						            					selectedItem = selectedItem + emailId + ',' ;
						            					//selectedItems.push(emailId);
						            				}
						            				
						            				else 
						            				{
						            					unSelectedItem = unSelectedItem + emailId + ',' ;
						            				}
						            			}
						            		}
						            		
						            		else
						            		{
						            			for( i=0; i<lstEmailIds.length;i++)
						            			{
						            				var emailId = lstEmailIds[i];
						            				emailId = emailId.trim() + '_PureSituation';
						            				unSelectedItem = unSelectedItem + emailId + ',' ;
						            			}
						            		}
						            	    selectedCommuPref(selectedItem,unSelectedItem);
						            	    
						            	}
						            </script>
						            <apex:actionfunction name="selectedCommuPref" action="{!commPreferencesSaveChanges}" rerender="dummy">
						            	<apex:param value="" name="param1" assignTo="{!strSelectedCommPreferences}"/>
						            	<apex:param value="" name="param2" assignTo="{!strUnSelectedCommPreferences}"/>
						            	<apex:param value="" name="param3" assignTo="{!isSubscriberEmailSelected}"/>
						            	<apex:param value="" name="param4" assignTo="{!isSubscriberStandardMailSelected}"/>
						            	
						            </apex:actionfunction> 	
						            <div class="unit-sub-divide">
							            <br />
							                <a href="" class="btn btn-pure" type="button" onclick="collectSelectedPreferences();" style="display:{!If($Profile.Name != 'Pure Customer Community Login User','none;','')}">SAVE CHANGES <i class="fa fa-caret-right"></i></a>
							            <br />
						           </div>
						           <br />
	          			  </form>
					    </div>
					    <script>
					    	if( $('.alert-checkbox-w-radio').length > 0 ) {
							$('#PurePrevention,#PureSituationRoom').on('change', function(){
								
								if( $(this).is(':checked') ) {
									var CommPrefId = $(this).attr('id');
									
									$(this).parents('.alert-checkbox-w-radio').find('.radio-options input[type="checkbox"]').attr('disabled', false);
									
									if( CommPrefId == 'PureSituationRoom')
									{
										if('{!strOrgnalPrimaryEmail}' != '' && '{!strOrgnalPrimaryEmail}' != null)
										{
											var PrimaryEmail = '{!strOrgnalPrimaryEmail}' + '_PureSituation';
											document.getElementById(PrimaryEmail).checked = 'checked';
										}
									}
									
									if( CommPrefId == 'PurePrevention')
									{
										if('{!strOrgnalPrimaryEmail}' != '' && '{!strOrgnalPrimaryEmail}' != null)
										{
											var PrimaryEmail = '{!strOrgnalPrimaryEmail}' + '_PurePrevention';
											document.getElementById(PrimaryEmail).checked = 'checked';
										}
									} 
									
								} else {
									if (confirm('Are you sure you want to remove your email from this list?')) {
										$(this).parents('.alert-checkbox-w-radio').find('.radio-options input[type="checkbox"]').prop('checked',false).attr('disabled', true);
								   } else {
										$(this).prop('checked', true);
								   }
								}
					
							});
						  }
					    </script>
					</div>
				</div>	
				<a href="#thankyouModalS" id="modelId1"  data-toggle="modal"></a>
				<div id="thankyouModalS" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
                        <div class="modal-header">
                            <h3 class="myModalLabel">Thank You</h3>
                        </div>
                        <div class="modal-body">
                            <p>Thank you for registering for PURE’s Member Portal. Please confirm that the information we have on file for you is correct. If you need to make updates, you can do so by clicking on the pencil icons.</p>
                            <br />
                        </div>
                        <div class="modal-footer">
                            <button id="change-password-continue" class=" btn btn-pure " data-dismiss="modal" aria-hidden="true" >OK</button>
                        </div>
               </div>
		</apex:form>
	<c:SL_SiteFooterComponent />
	</div><!-- main-content div End -->
<!-- 		  </div>	 -->
		</apex:define>
		
		<!-- Start of Right side  bar section -->
		<apex:define name="rightSideBar" >
	        <div id="sidebar" class="span3" >
	         	<c:SL_SideBarComponents /> 
	        </div>
	 	</apex:define>
	 	<!-- End of Right side  bar section -->
	</apex:composition>	
</apex:page>