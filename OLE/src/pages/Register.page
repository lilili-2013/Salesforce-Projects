<apex:page showHeader="false" controller="OLE_Register" standardStylesheets="false" sidebar="false" action="{!redirectAuthenticatedUser}">
    <apex:form id="form">
    <style> 
        .inputWidth
        {
            width:100%;
        }
        .rightInputstyle
        {
            float: right;
            width: 111%;
        }
        .errorMsg{
            display:block;
        }
        .register-line 
        {
        /*border-bottom: 4px solid #b5b5b5; */
        margin-top: 50px;
        margin-left: 157px;
        padding-left: 0;
        width: 100%;
    }
    .register-line:after 
    {
        content: "";
        top: 50px;
        left: -5px;
        width: calc(100% - 62px);
        border-bottom: 4px solid #b5b5b5;
        position: absolute;
    }
    .signin-center-content
    {
        margin-left: 157px;
    }
    .floatRight
     {
         float:right;
         margin-bottom:3%
     }
    .underline
     {
         position: absolute;
        border-top: 1px solid #e3e3e3;
        margin-top: -6%;
        width: 40px;
        margin-left: 3%;
     }
     .button-text
     {
        text-indent: 2%;
     }
     .rightDiv
     {
         float:right;
         width:50%;
     }
     .leftDiv
     {
         float:left;
         width:50%;
     }
     .requiredAsterisk {
    position: absolute;
    top: 42px;
    left: 2px;
    color: #c41230;
}
    </style>
    <!--<div>
        <h2>Register</h2>
    </div>-->
    <!--<p>
        <span >
            <apex:message id="error"/>
        </span>
    </p>-->
    <script type="text/javascript" src="https://www.google.com/recaptcha/api/js/recaptcha_ajax.js"></script>
    <script type="text/javascript">
            jQuery(document).ready(function (){
                Recaptcha.create("{!publicKey}",
                          "dynamic_recaptcha_1",
                {
                    theme: "red",
                    callback: Recaptcha.focus_response_field
                });
            });
        </script>
        <apex:inputhidden value="{!challenge}" id="challenge" />
        <apex:inputhidden value="{!response}" id="response" />
        <script type="text/javascript">
            function captureResponse(ele) {
                document.getElementById('{!$Component.challenge}').value =
                                                  document.getElementById('recaptcha_challenge_field').value;
                document.getElementById('{!$Component.response}').value =
                                                  document.getElementById('recaptcha_response_field').value;
           }
        </script>
    <apex:composition template="OLE_SiteTemplate">
        <apex:define name="body"> 
    
        <div class="col-xs-12 colors-red register-line signin-center-content content">
                register<br /><br />
            </div>
        
        <div class="col-xs-12 signin-center-content content">
            <apex:pageMessages id="error"/>
            <apex:outputPanel rendered="{!(strResult == '')}">
                 <!--<table width="35%">
                    <tr >
                        <apex:repeat value="{!$ObjectType.Contact.fieldsets.OLE_Register}" var="field">
                            <td style="display:{!IF(OR(field =='LastName',field =='MailingState',field =='MailingPostalCode'),'none','block')}">
                                <STRONG style="text-transform: uppercase;display:{!IF(OR(field.DBRequired,field.required) , '','none')}">{!field.Label}*</STRONG>
                                <STRONG style="text-transform: uppercase;display:{!IF(OR(field.DBRequired,field.required) , 'none','')}">{!field.Label}</STRONG>
                                <br/>
                                <apex:inputField value="{!contact[field]}" styleclass="{!IF(OR(field =='LastName',field =='MailingState',field =='MailingPostalCode',field =='FirstName',field =='MailingCity',field =='MailingStreet'),'','inputWidth')}" required="{!OR(field.DBRequired,field.required)}" />
                            </td>
                            <td style="display:{!IF(OR(field =='LastName',field =='MailingState',field =='MailingPostalCode'),'block','none')};float:right">
                                <STRONG style="text-transform: uppercase;display:{!IF(OR(field.DBRequired,field.required) , '','none')}">{!field.Label}*</STRONG>
                                <STRONG style="text-transform: uppercase;display:{!IF(OR(field.DBRequired,field.required) , 'none','')}">{!field.Label}</STRONG>
                                <br/>
                            <apex:inputField value="{!contact[field]}" styleClass="rightInputstyle" required="{!OR(field.DBRequired,field.required)}" /></td>
                        </apex:repeat>
                     </tr>
                </table>-->
                <div id="equalheight">
                    <div class="leftDiv">
                        <apex:repeat value="{!$ObjectType.Contact.fieldsets.OLE_Register_Left}" var="field">
                            <div class=" col-xs-12 row-same-height">
                                <strong class="requiredAsterisk" style="display:{!IF(OR(field.DBRequired,field.required) , '','none')}" >*</strong>
                                <div class="grey-underline">
                                    <!--<STRONG style="text-transform: lowercase" class="color-grey-2 input-label">{!field.Label}</STRONG>-->
                                    <STRONG style="text-transform: lowercase;display:{!IF(AND(field != 'Mailing City',field != 'Mailing Country') , 'none','block')}" class="color-grey-2 input-label">{!field.Label}</STRONG>
                                    <STRONG style="text-transform: lowercase;display:{!IF(field == 'Mailing City' , 'none','')}" class="color-grey-2 input-label">{!SUBSTITUTE(field.label, "Mailing", "")}</STRONG>
                
                                    <div style="overflow: hidden">
                                        <apex:inputField value="{!contact[field]}" required="{!OR(field.DBRequired,field.required)}" styleclass="signin-input required" />
                                    </div>
                                </div>
                            </div>
                        </apex:repeat>
                    </div>
                    <div class="rightDiv">
                        <apex:repeat value="{!$ObjectType.Contact.fieldsets.OLE_Register_Right}" var="field">
                            <div class=" col-xs-12 row-same-height">
                                <strong class="requiredAsterisk" style="display:{!IF(OR(field.DBRequired,field.required) , '','none')}">*</strong>
                                <div class="grey-underline">
                                    <!--<STRONG style="text-transform: lowercase;" class="color-grey-2 input-label">{!field.Label}</STRONG>-->
                                    <STRONG style="text-transform: lowercase;display:{!IF(AND(field != 'Mailing City',field != 'Mailing Country') , 'none','block')}" class="color-grey-2 input-label">{!field.Label}</STRONG>
                                    <STRONG style="text-transform: lowercase;display:{!IF(field == 'Mailing City' , 'none','')}" class="color-grey-2 input-label">{!SUBSTITUTE(field.label, "Mailing", "")}</STRONG>
                
                                    <div style="overflow: hidden">
                                        <apex:inputField value="{!contact[field]}" required="{!OR(field.DBRequired,field.required)}" styleclass="signin-input required" />
                                    </div>
                                </div>
                            </div>
                        </apex:repeat>
                    </div>
                </div>
                <div class="col-sm-3 col-xs-12 floatRight">
					<apex:commandbutton value="Cancel" action="{!cancel}" styleclass="main-button-small main-button-grey text-left btn-flat button-text" immediate="true">
					     <div id="underlineDiv" class="underline" style="margin-left: 6%;">&nbsp;</div>
					</apex:commandbutton>
                </div>
                <div class="col-sm-6 col-xs-12 floatRight">
					<apex:commandbutton value="Register" action="{!validateAndSave}" html-formnovalidate="formnovalidate"  styleclass="main-button-small main-button-red text-left btn-flat button-text" onclick="javascript:captureResponse(this);">
					    <div id="underlineDiv" class="underline" style="margin-top: -3%;">&nbsp;</div>
					</apex:commandbutton>
				</div>
            </apex:outputPanel>
            <apex:outputPanel layout="block" rendered="{!(strResult == 'EXISTING_USER')}">
                <div >
                   <h2 >{!$Label.OLE_Existing_Contact}</h2>
                   <p>
                       <u><apex:outputLink value="{!$Page.Signin}" rendered="{!$Site.LoginEnabled}">Go to Login Page</apex:outputLink></u>
                       <u><apex:outputLink value="{!$Page.Register}" rendered="{!$Site.LoginEnabled}">Try again</apex:outputLink></u>
                   </p> 
                </div>
            </apex:outputPanel>
            <apex:outputPanel layout="block" rendered="{!(strResult == 'SUCCESS')}">  
                <div>
                   <h2 >{!$Label.OLE_Register_Successful}</h2>
                   <p><u><apex:outputLink value="{!$Page.Signin}" rendered="{!$Site.LoginEnabled}">Go to Login Page</apex:outputLink></u></p> 
                </div>
            </apex:outputPanel>
            <div id="dynamic_recaptcha_1" style="padding-left: 120px;"></div>
        </div>
        
    
    </apex:define>
    </apex:composition>
    </apex:form>
</apex:page>