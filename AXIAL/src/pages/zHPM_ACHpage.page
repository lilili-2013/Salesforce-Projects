<apex:page controller="zHPMACHController" sidebar="true" showHeader="true"
    tabStyle="zqu__Quote__c" >
    <script>
        function callbacksuccess(pmid, displayMessage) {
        
          setQuotePaymentMethod(pmid, displayMessage);
          
          var concatChar = '?'; 
          if ( '{!thisController.nextUrl}'.indexOf(concatChar) >= 0 ) {
            concatChar = '&'; 
          }
          
          //window.location = '{!thisController.nextUrl}' + concatChar + 'pmid=' + pmid + '&id=' + '{!$CurrentPage.parameters.id}' + '&displayMessage=' + displayMessage;
        }
    </script>
    <apex:form >
        <apex:actionFunction name="setQuotePaymentMethod" action="{!setQuotePaymentMethod}" rerender="buttons">
            <apex:param name="pmid" value="pmid" assignTo="{!pmId}" />
            <apex:param name="displayMessage" value="displayMessage" assignTo="{!displayMessage}" />
        </apex:actionFunction>
    </apex:form>
        
    <apex:sectionHeader title="Quote" subtitle="Create New ACH Payment Method" />
    <zqu:HostedPage injectedController="{!thisController}" includeButtonBar="true" hostedPageSettingName="NewACH" />
</apex:page>