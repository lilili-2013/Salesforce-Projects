<apex:page controller="SL_CreateShipmentsController" sidebar="true">
	<apex:form >
		<script>
			/* Enable a proceed button */
			function enableButton()
			{
				document.getElementById("processBtnId").disabled = false;
				document.getElementById("processBtnId").style.color = '';
			}
			
			/* Redirect page to respective Literature request detail page onclick of Cancel button  */
			function cancelButton()
			{
				window.location.href = '/{!$CurrentPage.parameters.id}';  
			}
		</script>
		<!-- Start - Action function -->
		<apex:actionFunction name="createShipmentsAF" action="{!createShipments}" status="loading" rerender="ErrorMessage"/>
		<apex:actionFunction name="processShipmentAF" action="{!processShipment}" status="loading" rerender="ErrorMessage"/>
		<apex:actionPoller action="{!fetchStatusProceed}" rerender="ErrorMsg" interval="5"/>
		<!-- End - Action function -->
		<!-- Start - Page block -->
		<apex:pageBlock >
			<apex:pageMessages id="ErrorMessage"></apex:pageMessages>
			<apex:pageMessages id="ErrorMsg"></apex:pageMessages>
			<div style="margin-top: 20px; text-align: center; height: 103px;">
				<p style="font-size: 16px;">Click <b>'Validate'</b> button to validate shipments then click <b>'Process Shipments'</b> button to process</p><br/>
				<button type="button" class="btn" style="padding: 4px 3px;" onclick="createShipmentsAF();enableButton();" >Validate</button>
				<button type="button" Id="processBtnId" class="btn" style="margin-left: 55px;color: gray;padding: 4px 3px;" onclick="processShipmentAF();" disabled="disabled">Process Shipments</button>
				<button type="button" class="btn"  style="margin-left: 55px;padding: 4px 3px;" onclick="cancelButton();">Return to record</button>
			</div>
		</apex:pageBlock>
		<!-- End - Page block -->
		<!-- Start - For  Loading symbol  -->
		<apex:actionstatus id="loading">
		    <apex:facet name="start">
		        <div id="salesforceSource_blurybackground" style="z-index:9999; position:fixed; left:1px; top:1px; width:100%;height:100%; text-align:center; vertical-align: middle; background-color: #dcdcdc; opacity:0.4;filter:alpha(opacity=40)"></div>
		        <div id="ManageMembersViewport_loading" class="waitingSearchDiv" style="width: 100%; height: 100%; display: ''; ">
		            <div style="vertical-align: middle;" class="waitingHolder">
		                <table align="center" valign="middle" style="width: 100%; height: 30%">
		                    <tr align="center" valign="middle" style="width: 100%; height: 30%">
		                        <td valign="middle">&nbsp;</td>
		                    </tr>
		                </table> 
		            </div>
		        </div>
		        <div id="ManageMembersViewport_loading" class="waitingSearchDiv" style="width: 100%; height: 100%; display: ''; "></div>
		        <script>document.getElementById('ManageMembersViewport_loading').height = window.innerHeight * (3/4);</script>
		    </apex:facet>
		</apex:actionstatus>
		<!-- End - For Loading symbol  -->		
	</apex:form>
</apex:page>