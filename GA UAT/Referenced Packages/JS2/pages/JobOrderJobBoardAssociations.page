<apex:page standardController="ts2__Job__c" extensions="ts2.JobOrderJobBoardAssociations">

	<apex:form id="frm">
		<apex:pageMessages id="pageMessages" />

		<apex:pageBlock id="pageBlock">
			<apex:actionStatus id="status">
				<apex:facet name="start">
					<apex:outputPanel >
						<apex:image value="/img/loading.gif" />
						<apex:outputPanel style="padding:5px;">
							<apex:outputText value="{!$Label.LabelImageLoading}" />
						</apex:outputPanel>
					</apex:outputPanel>
				</apex:facet>
				<apex:facet name="stop">
					<apex:pageBlockTable value="{!AssociateJobBoardSetups}" var="AssociateJobBoardSetup">
						<apex:column >
							<apex:facet name="header">
								<apex:inputCheckbox value="{!AssociateAll}" disabled="{!ReadOnly}">
									<apex:actionSupport event="onclick" action="{!associateAll}" status="status" rerender="frm" />
								</apex:inputCheckbox>
							</apex:facet>
							<apex:inputCheckbox value="{!AssociateJobBoardSetup.Associate}" disabled="{!ReadOnly}">
								<apex:actionSupport event="onclick" action="{!associate}" status="status" rerender="frm" />
							</apex:inputCheckbox>
						</apex:column>
						<apex:column headerValue="{!$ObjectType.ts2__Job_Board_Setup__c.Fields.Name.Label}">
							<apex:outputLink value="{!URLFOR($Action.Job_Board_Setup__c.View, AssociateJobBoardSetup.JobBoardSetup.Id)}" onclick="top.location = '{!URLFOR($Action.Job_Board_Setup__c.View, AssociateJobBoardSetup.JobBoardSetup.Id)}';">
								<apex:outputField value="{!AssociateJobBoardSetup.JobBoardSetup.Name}" />
							</apex:outputLink>
						</apex:column>
						<apex:column value="{!AssociateJobBoardSetup.JobBoardSetup.ts2__Job_Board_Type__c}" />
						<apex:column value="{!AssociateJobBoardSetup.JobBoardSetup.ts2__Address_Validation__c}" />
						<apex:column headerValue="{!$ObjectType.ts2__Job_Board_Setup__c.Fields.ts2__SiteURL__c.Label}">
							<apex:outputLink value="{!AssociateJobBoardSetup.JobBoardSetup.ts2__SiteURL__c}" onclick="window.open('{!JSENCODE(AssociateJobBoardSetup.JobBoardSetup.ts2__SiteURL__c)}', '_blank'); return false;">
								<apex:outputField value="{!AssociateJobBoardSetup.JobBoardSetup.ts2__SiteURL__c}" />
							</apex:outputLink>
						</apex:column>
						<apex:column >
							<apex:outputLink rendered="{!AssociateJobBoardSetup.Associate && ts2__Job__c.ts2__Post_Job__c}" value="{!IF(RIGHT(AssociateJobBoardSetup.JobBoardSetup.ts2__SiteURL__c, 1) == '/', LEFT(AssociateJobBoardSetup.JobBoardSetup.ts2__SiteURL__c, LEN(AssociateJobBoardSetup.JobBoardSetup.ts2__SiteURL__c) - 1), AssociateJobBoardSetup.JobBoardSetup.ts2__SiteURL__c) + $Page.ts2__JobDetails}" onclick="window.open('{!IF(RIGHT(AssociateJobBoardSetup.JobBoardSetup.ts2__SiteURL__c, 1) == '/', LEFT(AssociateJobBoardSetup.JobBoardSetup.ts2__SiteURL__c, LEN(AssociateJobBoardSetup.JobBoardSetup.ts2__SiteURL__c) - 1), AssociateJobBoardSetup.JobBoardSetup.ts2__SiteURL__c) + $Page.ts2__JobDetails + '?' + JobIdParam + '=' + ts2__Job__c.Id}', '_blank'); return false;">
								<apex:param name="{!JobIdParam}" value="{!ts2__Job__c.Id}" />
								<apex:outputText value="{!$Label.LinkJobPostPreview}" />
							</apex:outputLink>
						</apex:column>
					</apex:pageBlockTable>
				</apex:facet>
			</apex:actionStatus>
		</apex:pageBlock>

	</apex:form>

</apex:page>