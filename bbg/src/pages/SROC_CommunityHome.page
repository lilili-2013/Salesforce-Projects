<apex:page controller="SROC_CommunityHomeController" showHeader="false" sidebar="false" standardStylesheets="false" applyHtmlTag="false" applyBodyTag="false" docType="html-5.0" action="{!forwardToStartURL}" >
  
  <style>
  .alert-highlight-wrapper {
  	margin-bottom: 50px;
  }
  .alert-highlight {
  	background-color: #EBEBEB;
  }
  .highlights-table td{
  	
    padding: 10px 30px 10px 30px;
  	
  }
  .highlights-div {
  	text-align: center;
    margin-bottom: 20px;
    font-size: larger;
  }
  .home-boat-name {
  	float: right;
  	padding-right: 100px;
  }
  .home-error-wrapper {
        	padding-top: 100px;
        	margin-bottom: 50px;
        	margin-left:20px;
  }
  </style>
  
  <apex:outputText value="{!$Label.CORECONNECT__CC_Home_Title}" rendered="false"/>
  <apex:composition template="{!$Site.Template}">
    <apex:define name="pagetitle"> <apex:outputText value="{!$Label.CORECONNECT__CC_Home_Title}"/></apex:define>
    <apex:define name="body" > 
      <article class="container box group-detail my-boat-detail">
      <div id="bannerImage" class="group-header banner-image has-edit" style="background-image: url({!homeBannerURL})">
		<apex:outputPanel layout="none" rendered="{!isOwner && currOBR != null}">
		<div class="edit-button-container">
	    	<button class="edit" data-toggle="modal" data-target="#my-boat-edit">
	        	<span class="label sr-only">Edit</span>
	       		<i class="icon fa fa-cog"></i>
	    	</button>
	  	</div>
	  	</apex:outputPanel>
	  	<div class="boat-nameplate">
        	<div class="boat-name">
        	Welcome, {!$User.CommunityNickname}
        	<apex:outputPanel layout="none" rendered="{!isOwner && currOBR != null}"><div class="home-boat-name">{!currOBR.SROC_Boat_Name__c}</div></apex:outputPanel>
        	</div>
        	
        </div>
      </div>
      
      
      <!--My Links Section-->
      <apex:outputPanel rendered="{!$Profile.Name != GuestProfileName}">
      <apex:variable var="linkCount" value="{!1}" /> 
      
      <div class="wrapper pixel-pattern">
        <section class="container my-links">
              <header>
                <h2 id="my-links">My Shortcuts</h2>
              </header>
              <div class="my-links-slides">
                <ul class="my-links-list">
                  <apex:repeat value="{!ListOfMyLinks}" var="MyLinks" >
                    <li class="col-sm-2">
                      <a href="{!MyLinks.CORECONNECT__My_Links_URL__c}" class="my-link2" target="_blank">
                        <span class="image favicon"><img src="{!mapOfMyLinksIcons[MyLinks.Id]}"/></span>
                        <span class="text">{!MyLinks.CORECONNECT__My_Links_Title__c}</span>
                      </a>
                    </li>
                    <apex:outputText rendered="{!MOD(linkCount, 6) == 0}" value="</ul><ul class='my-links-list'>" escape="false"></apex:outputText>
                    <apex:outputText rendered="{!linkCount == ListOfMyLinks.size}" value="{0}" escape="false">
                      <apex:param value='<li class="col-sm-2 add-edit"><a href="{!$Page.SROC_Community_My_Shortcuts}"><span class="image"><span class="icon-plus"></span></span><span class="text">Add Shortcut</span></a></li>' />
                    </apex:outputText>
                    <apex:variable var="linkCount" value="{!linkCount+1}"/>
                  </apex:repeat>
                  <!-- Lots of text to put in a whole row of default links -->
                  <apex:outputText rendered="{!ListOfMyLinks.size == 0}" value="{0}" escape="false">
                    <apex:param value='<li class="col-sm-2 add-edit"><a href="{!$Page.SROC_Community_My_Shortcuts}"><span class="image"><span class="icon-plus"></span></span><span class="text">Add Shortcut</span></a></li><li class="col-sm-2 add-edit"><a href="{!$Page.SROC_Community_My_Shortcuts}"><span class="image"><span class="icon-more"></span></span><span class="text">Add Shortcut</span></a></li><li class="col-sm-2 add-edit"><a href="{!$Page.SROC_Community_My_Shortcuts}"><span class="image"><span class="icon-more"></span></span><span class="text">Add Shortcut</span></a></li><li class="col-sm-2 add-edit"><a href="{!$Page.SROC_Community_My_Shortcuts}"><span class="image"><span class="icon-more"></span></span><span class="text">Add Shortcut</span></a></li><li class="col-sm-2 add-edit"><a href="{!$Page.SROC_Community_My_Shortcuts}"><span class="image"><span class="icon-more"></span></span><span class="text">Add Shortcut</span></a></li><li class="col-sm-2 add-edit"><a href="{!$Page.SROC_Community_My_Shortcuts}"><span class="image"><span class="icon-more"></span></span><span class="text">Add Shortcut</span></a></li>' />
                  </apex:outputText>
                </ul>
              </div>
              <div>
              Preferred Dealer
              </div>
              <footer>
                <div class="more">
                  <a href="{!$Page.SROC_Community_My_Shortcuts}">Edit Shortcuts <span class="icon-more"></span></a>
                </div>
              </footer>
        </section>
      </div>
      
      </apex:outputPanel>
      <!-- /.my-links -->
            
      <br/><br/><br/><br/>
      
      <div class="wrapper">
      		
      		<div class="container">
      			<div class="home-error-wrapper">
		  		<apex:outputPanel rendered="{!isError}">
                        	<apex:pageMessages />
				</apex:outputPanel>
      			</div>
      		</div>
      		
      		
      		<div class="alert-highlight-wrapper">
      		
      		<!-- Thank you message from CC_CommunityCreateFTSC -->
      		
      		<apex:outputPanel layout="none" id="Highlights">
        	<apex:outputPanel rendered="{!showHighlights}">
          	<div class="container">
          		
          		<div class="alert alert-highlight fade in" role="alert">
          		<section class="featured-ScheduledContent">
              	
              	<header>
                	<h2 id="searaystream">Experience the Sea Ray community and our world-class support systems.</h2>
      				<apex:form ><apex:commandLink styleClass="close" action="{!dismissHighlights}" rerender="Highlights"><small>Dismiss</small> <span aria-hidden="true">&times;</span><span class="sr-only"></span></apex:commandLink></apex:form>	
              	</header>
              	
              	<table class="highlights-table">
              		<tr>
              			<td>
              				<div class="highlights-div">
              					Get the most out of the Sea Ray Owners Club.
              				</div>
              				<div class="highlights-div">
              					<a href="#" class="btn btn-primary">Start Here</a>	
              				</div>
              			</td>
              			
              			<td>
              				<div class="highlights-div">
              					Connect with other Sea Ray boat owners, Ambassadors, and Dealers.
              				</div>
              				<div class="highlights-div">
              					<a href="{!$Page.SROC_Community}" class="btn btn-primary">Explore Community</a>	
              				</div>
              			</td>
              			
              			<td>
              				<div class="highlights-div">
              					Discover exclusive Sea Ray Events around the country.
              				</div>
              				<div class="highlights-div">
              					<a href="{!$Page.SROC_CommunityEvents}" class="btn btn-primary">Sea Ray Events</a>	
              				</div>
              			</td>
              		</tr>
              	</table>
            	</section>
            	</div>
            	
          	</div>
        	</apex:outputPanel>  	
      		</apex:outputPanel>
      		</div>
      	
      		
      	<div class="container">

		  <div class="col-md-8">
		  	<section class="featured-ScheduledContent">
		  	  <header>
                  <h2 id="searaystream">Featured News</h2>
              </header>
              <hr class="visible-xs" />
			  
			  <c:SROC_Featured_News numberOfNews="1"/>
			  
			  <footer>
                  <div class="more">
                    <a href="{!$Page.SROC_Sea_Ray_News}">View News <span class="icon-more"></span></a>
                  </div>
                </footer>
			  
         	</section> 
         </div>
		  	
          <div class="col-md-4">
              
              <!--Featured Groups-->
              <section class="featured-groups">
                <header>
                  <h2>From Launchpad</h2>
                </header>
                
                <div style="min-height: 300px;">
                	
                	<div class="col-md-3">
                  	Item 1<br/>
                  	Story details....
                  	</div>
                  	
                  	<div class="col-md-3">
                  	Item 2<br/>
                  	Story details....
                  	</div>
                  	
                </div>
                                  
                <footer>
                  <div class="more">
                    <a href="#">Read More at Launchpad <span class="icon-more"></span></a>
                  </div>
                </footer>
              </section><!-- /.featured-groups -->
              
            </div>
          


          </div>
      	
      	<div class="container">
      		<section class="featured-ScheduledContent">
                <header>
                  <h2 id="featured-ScheduledContent">Upcoming Events</h2>
                </header>
            	
            	<c:SROC_Featured_Events numberOfEvents="4"/>
            	
            	<footer>
                  <div class="more">
                    <a href="{!$Page.SROC_CommunityEvents}">View Events <span class="icon-more"></span></a>
                  </div>
                </footer>
            	    
           	</section>
      	</div>
      	
      	
        <div class="container">
		  
		  <div class="col-md-6">
		  	<section class="featured-ScheduledContent">
		  	  <header>
                  <h2 id="searaystream">Sea Ray Stream</h2>
              </header>
              <hr class="visible-xs" />
              <chatter:feed entityId="{!$User.Id}"/>
         	</section> 
         </div>
		  	
          <div class="col-md-6">
              
              <!--Featured Groups-->
              <apex:outputPanel rendered="{!$Profile.Name != GuestProfileName}">
              <section class="featured-groups">
                <header>
                  <h2>Explore Groups</h2>
                  <p> {!$Label.CORECONNECT__CC_Home_Featured_Groups_Subtitle}</p>
                  
                </header>
                
                <c:SROC_Featured_Groups numberOfGroups="3"/>

                <footer>
                  <div class="more">
                    <a href="{!$Page.CORECONNECT__CC_CommunityGroups}">View Groups <span class="icon-more"></span></a>
                  </div>
                </footer>
              </section><!-- /.featured-groups -->
              
              </apex:outputPanel>
            </div>
          


          </div>

      </div>

   </article>     
    
    <!-- my-boat-edit -->
				<apex:outputPanel layout="none" rendered="{!isOwner && currOBR != null}">
                <div class="modal fade" id="my-boat-edit" tabindex="-1" role="dialog" aria-labelledby="my-boat-label" aria-hidden="true">
                    <div class="modal-dialog modal-dialog-dealer-search">
                        <apex:form >
                            <form role="form">
                                <div class="modal-content">
                                    <div class="modal-header">
                                        <button type="button" class="close" data-dismiss="modal">
                                        	<i class="icon fa fa-times" aria-hidden="true"></i>
                                            <span class="sr-only">Close</span>
                                        </button>
                                        <h4 class="modal-title" id="group-label">Edit your dashboard</h4>
                                    </div>
                                    <div class="modal-body">
                                        <header>
                                            <h2>
                                                <span class="step-indicator">1</span>
                                                Select a Dashboard Background
                                            </h2>
                                        </header>
                                        <div class="form-group">
                                            <apex:inputFile value="{!NewBannerImageAttachment.body}" filename="{!NewBannerImageAttachment.name}" styleClass="file image pull-left clearfix" accept="gif,png,jpg,jpeg" />
                                            <br/>Your Image should be in PNG, JPG, or GIF format and be a minimum of 1645 X 250 pixels.
                                            <apex:commandButton id="clearMyBoatImageButton" value="Use Default" action="{!clearMyBoatImage}" styleClass="btn btn-default pull-right" style="padding-left:5px;width: 100px;margin-right: 1px; font-size:14px;" rendered="{!BannerImageAttachment != null}"></apex:commandButton>
                                        </div>
                                        <div style="margin-top: 15px; margin-bottom: 20px;min-height: 20px;"></div>
                                        <header>
                                            <h2>
                                                <span class="step-indicator">2</span>
                                                Enter Your Boat Name (Optional)
                                            </h2>
                                        </header>
                                        <div class="form-group">
                                            <apex:inputField label="Boat Name:" styleClass="form-control" value="{!currOBR.SROC_Boat_Name__c}" onkeypress="return ignoreEnterKeySave(event);"></apex:inputField>
                                        </div>
                                        <div class="form-group">
                                            <apex:actionRegion >
                                                <header>
                                                    <h2>
                                                        <span class="step-indicator">3</span>
                                                        Select Your Preferred Dealer
                                                    </h2>
                                                </header>
                                                <apex:outputPanel >
                                                    <div class="dealer preferred-dealer">
                                                        <div class="dealer-details">
														    <div class="name">{!currOBR.Owner__r.SROC_Preferred_Dealer__r.Name} &nbsp;</div>
														    <div class="address">
														        <div>{!currOBR.Owner__r.SROC_Preferred_Dealer__r.ShippingStreet} &nbsp;</div>
														        <div>{!currOBR.Owner__r.SROC_Preferred_Dealer__r.ShippingCity}, {!currOBR.Owner__r.SROC_Preferred_Dealer__r.ShippingState} {!currOBR.Owner__r.SROC_Preferred_Dealer__r.ShippingPostalCode} {!currOBR.Owner__r.SROC_Preferred_Dealer__r.ShippingCountry}</div>
														    </div>
														    <div>
														    	<apex:outputText styleClass="data-point phone" value="{!currOBR.Owner__r.SROC_Preferred_Dealer__r.Phone}" rendered="{!currOBR.Owner__r.SROC_Preferred_Dealer__r.Phone != null && currOBR.Owner__r.SROC_Preferred_Dealer__r.Phone != ''}"/>
														    </div>
														    <div class="additional-data">
														    	<div>
		                                                            <apex:outputLink styleClass="data-point website" value="{!IF(BEGINS(currOBR.Owner__r.SROC_Preferred_Dealer__r.Website,'http'),currOBR.Owner__r.SROC_Preferred_Dealer__r.Website,'http://' + currOBR.Owner__r.SROC_Preferred_Dealer__r.Website)}" rendered="{!currOBR.Owner__r.SROC_Preferred_Dealer__r.Website != null && currOBR.Owner__r.SROC_Preferred_Dealer__r.Website != ''}" target="_blank">{!currOBR.Owner__r.SROC_Preferred_Dealer__r.Website}</apex:outputLink>&nbsp;
		                                                        </div>
	                                                            <apex:outputText styleClass="data-point categories" value="Types: {!currOBR.Owner__r.SROC_Preferred_Dealer__r.Sea_Ray_Boat_Categories__c}" rendered="{!currOBR.Owner__r.SROC_Preferred_Dealer__r.Sea_Ray_Boat_Categories__c != null && currOBR.Owner__r.SROC_Preferred_Dealer__r.Sea_Ray_Boat_Categories__c != ''}"/>
		                                                        <div>
	                                                                <apex:outputLink styleClass="data-point location" target="_blank" value="https://www.google.com/maps/search/{!URLENCODE(currOBR.Owner__r.SROC_Preferred_Dealer__r.ShippingStreet + ' ' + currOBR.Owner__r.SROC_Preferred_Dealer__r.ShippingCity + ' ' + currOBR.Owner__r.SROC_Preferred_Dealer__r.ShippingState + ' ' + currOBR.Owner__r.SROC_Preferred_Dealer__r.ShippingPostalCode)}">Map It</apex:outputLink>
		                                                        </div>
														    </div>
														</div>
                                                    </div>
                                                </apex:outputPanel>
                                                <div style="margin-top: 15px; margin-bottom: 20px;"></div>Location Postal Code:
                                                <apex:inputText styleClass="form-control" style="width: 30%; margin-left: 10px; display: inline-block;" value="{!dealerPostalCodeSearch}" onkeypress="return ignoreEnterKey(event);"/>
                                                <div style="width:150px; margin-left: 10px; display:inline-block;">
                                                    <apex:selectList value="{!withinDistance}" multiselect="false" size="1" styleClass="form-control chosen" html-data-placeholder="Distance Within:">
                                                        <apex:selectOption itemValue="0" itemLabel="Within:"/>
                                                        <apex:selectOption itemValue="1" itemLabel="1 Mile"/>
                                                        <apex:selectOption itemValue="3" itemLabel="3 Miles"/>
                                                        <apex:selectOption itemValue="5" itemLabel="5 Miles"/>
                                                        <apex:selectOption itemValue="10" itemLabel="10 Miles"/>
                                                        <apex:selectOption itemValue="20" itemLabel="20 Miles"/>
                                                        <apex:selectOption itemValue="50" itemLabel="50 Miles"/>
                                                        <apex:selectOption itemValue="100" itemLabel="100 Miles"/>
                                                    </apex:selectList>
                                                </div>
                                                <apex:commandButton id="dealerSearchButton" styleClass="form-control btn btn-primary" style="width: 10%; margin-left: 10px; display: inline-block;" value="Find" action="{!doDealerSearch}" rerender="dealerSearch" status="dealerSearchStatus"/>
                                                <apex:actionStatus id="dealerSearchStatus" startText="Updating..." stopText="" startStyle="margin-left: 10px;"/>
                                                <apex:outputPanel id="dealerSearch" styleClass="dealer-search">
                                                    <apex:pageBlock >
                                                        <apex:outputPanel rendered="{!dealerSearchList != null && dealerSearchList.size != 0}" layout="none">
                                                            <div style="margin-top: 10px;">
                                                                <apex:outputText value="Sea Ray recommends the following dealer(s) listed below based on results of search near <b>{!dealerPostalCodeSearch}</b>" escape="false"/>
                                                            </div>
                                                            <apex:outputPanel layout="none" id="dealerResults">
                                                                <apex:pageBlockTable styleClass="dealer-search-results" value="{!dealerSearchList}" rowClasses="dealer-row" var="dealer" rendered="{!dealerSearchList != null && dealerSearchList.size != 0}">
                                                                    <apex:column styleClass="dealer">
                                                                        <input type="radio" name="chosen" id="{!dealer.id}" VALUE="{!dealer.id}" onclick="changeValue(this,'{!$Component.RadioButtonValue}');"/>
                                                                        <div class="dealer-details">
                                                                            <div class="name">{!dealer.Name} &nbsp;</div>
                                                                            <div class="address">
	                                                                            <div>{!dealer.ShippingStreet} &nbsp;</div>
	                                                                            <div>{!dealer.ShippingCity}, {!dealer.ShippingState} {!dealer.ShippingPostalCode} {!dealer.ShippingCountry}&nbsp;</div>
                                                                            </div>
                                                                            <div>
                                                                            	<apex:outputText styleClass="data-point phone" value="{!dealer.Phone}" rendered="{!dealer.Phone != null && dealer.Phone != ''}"/>
                                                                            </div>
                                                                            <div class="additional-data">
                                                                                <div>
	                                                                                <apex:outputLink styleClass="data-point website" value="{!IF(BEGINS(dealer.Website,'http'),dealer.Website,'http://' + dealer.Website)}" rendered="{!dealer.Website != null && dealer.Website != ''}" target="_blank">{!dealer.Website}</apex:outputLink>&nbsp;
	                                                                            </div>
                                                                                <div>
	                                                								<apex:outputText styleClass="data-point categories" value="Types: {!dealer.Sea_Ray_Boat_Categories__c}" rendered="{!dealer.Sea_Ray_Boat_Categories__c != null && dealer.Sea_Ray_Boat_Categories__c != ''}"/>
                                                                                </div>
                                                                                <div>
                                                                                	<apex:outputLink styleClass="data-point location" target="_blank" value="https://www.google.com/maps/search/{!URLENCODE(dealer.ShippingStreet + ' ' + dealer.ShippingCity + ' ' + dealer.ShippingState + ' ' + dealer.ShippingPostalCode)}">Map It</apex:outputLink>
                                                                            	</div>
                                                                            </div>
                                                                        </div>
                                                                        <script>

                                                                            if('{!dealer.Id}' == '{!currOBR.Owner__r.SROC_Preferred_Dealer__c}')
                                                                                document.getElementById('{!dealer.Id}').checked = true;
                                                                            else
                                                                                document.getElementById('{!dealer.Id}').checked = false;

                                                                        </script>
                                                                    </apex:column>
                                                                </apex:pageBlockTable>
                                                            </apex:outputPanel>
                                                        </apex:outputPanel>
                                                    </apex:pageBlock>
                                                    <apex:inputHidden value="{!selectedPreferredDealer}" id="RadioButtonValue" />

                                                    <script>
                                                        function changeValue(input, textid) {
                                                            document.getElementById(textid).value = input.value;
                                                        }

                                                        function ignoreEnterKey(e){
                                                            if ((window.event&&window.event.keyCode==13) || e.which==13) {
                                                            document.getElementById('{!$Component.dealerSearchButton}').click();
                                                            return false;
                                                        }
                                                        else {
                                                            return true;
                                                            };
                                                        }
                                                    </script>
                                                    <apex:outputPanel rendered="{!dealerSearchList == null || dealerSearchList.size == 0}">Search did not return any results.</apex:outputPanel>
                                                </apex:outputPanel>
                                            </apex:actionRegion>
                                        </div>
                                    </div>
                                    <div class="modal-footer">
                                        <apex:commandButton id="saveMyBoatInfoButton" value="Save" action="{!saveMyBoatInfo}" styleClass="btn btn-primary" ></apex:commandButton>
                                        <apex:commandButton value="Close" styleClass="btn btn-default" html-data-dismiss="modal" ></apex:commandButton>
                                        <script>
                                            function ignoreEnterKeySave(e){
                                                if ((window.event&&window.event.keyCode==13) || e.which==13) {
                                                    document.getElementById('{!$Component.saveMyBoatInfoButton}').click();
                                                    return false;
                                                } else {
                                                    return true;
                                                };
                                            }
                                        </script>
                                    </div>
                                </div>
                            </form>
                        </apex:form>
                    </div>
                </div>
            </apex:outputPanel>
      
    </apex:define>

<apex:define name="footerjs">
<apex:outputPanel rendered="{!ShowGettingStartedLink}">
<script>
    
    var tourSteps = [];
    <apex:repeat value="{!PageTours}" var="pageTour">
    var tourStep = {};
    tourStep['element'] = '{!pageTour.CORECONNECT__Markup_Element__c}';
    tourStep['title'] = '{!pageTour.Name}';
    tourStep['content'] = '{! JSINHTMLENCODE (pageTour.CORECONNECT__Content__c)}';
    tourStep['placement'] = '{!pageTour.CORECONNECT__Placement__c}';
    
    if('{!pageTour.CORECONNECT__Animation__c}' == 'true')
    {
        tourStep['animation'] = true;
    }
    else
    {
        tourStep['animation'] = false;
    }
    
    tourSteps.push(tourStep);
    </apex:repeat>
  
  var stepsCount = tourSteps.length;

  var myTour = new Tour({
    template: function(i, step) {
                return "<div class='popover tour'> \
                          <div class='arrow'></div> \
                          <nav class='popover-navigation clearfix'> \
                            <div class='stepnum'><strong>" + (i + 1) + "</strong> / " + stepsCount + "</div> \
                            <div class='btn-group pull-right'> \
                              <button class='btn btn-default' data-role='prev'><span class='icon-arrow-back'></span></button> \
                              <button class='btn btn-default' data-role='next'><span class='icon-more'></span></button> \
                            </div> \
                          </nav> \
                          <h3 class='popover-title'></h3> \
                          <div class='popover-content'></div> \
                          <button class='btn btn-link' data-role='end'><span class='icon-collapse'></span></button> \
                        </div>";
    },
    storage: false,
    steps: tourSteps
  });

  myTour.init();

  // Start the tour
  $('#start-tour').click(function() {
    myTour.restart();
  });

    

</script>
</apex:outputPanel>
</apex:define>

  </apex:composition>
</apex:page>