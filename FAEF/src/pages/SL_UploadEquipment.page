<apex:page controller="SL_UploadEquipment" >
    <style>
        .bCrumb{
            font-family: 'Verdana','Geneva',sans-serif;
            font-size:11px;
            color:#015ba7;
            text-decoration:none;
        }
        .bCrumb:hover{ 
        	text-decoration:none;
        }
        .bCrumbWrapper{
            margin-top:-13px;
            padding-bottom:5px;
        }
    </style>
    <apex:form >
      	<apex:messages />
        <apex:sectionHeader title="{!IF(isUploaded,'Review your data','Upload a csv')}" subtitle="Manage {!objectNameUI} data"/>
        <div id="backLink" class="bCrumbWrapper bCrumb" >
            &nbsp;Â«<apex:commandLink action="{!backToParent}" value="Back to {!parentObjectNameUI}" styleClass="bCrumb" />
        </div>
        <!-- Start : Input file page block section.  -->
        <apex:pageblock rendered="{!!isUploaded}">
            <apex:pageBlockButtons location="bottom">
                <apex:commandButton value="Upload CSV" action="{!upload}"/>
            </apex:pageBlockButtons>
            <apex:pageBlockSection >
                <apex:pageBlockSectionItem >
                    <apex:outputLabel value="File"/>						  
                    <apex:inputFile value="{!csv}" contentType="text/csv"/>
                </apex:pageBlockSectionItem>
            </apex:pageBlockSection>
        </apex:pageblock>
        <!-- End  : Input file page block section.  -->
        <!-- Start: Displaying Equipment sObjects list which are coming from CSV file   -->
        <apex:pageBlock rendered="{!isUploaded}">
            <apex:pageBlockButtons location="bottom">
                <apex:commandButton value="Back" action="{!back}"/>
                <apex:commandButton value="Save" action="{!save}"/>
            </apex:pageBlockButtons>
            <!--equipList Contains list of equiptment records  -->
            <apex:pageBlockTable value="{!equipList}" var="e">
                <!--lstColumnNames Contains all valid columns coming from CSV file  -->
                <apex:repeat value="{!lstColumnNames}" var="col"> 
                	<apex:column value="{!e[col]}"/>
                </apex:repeat>
            </apex:pageBlockTable> 
        <!-- End: Displaying list   -->
        </apex:pageBlock>
    </apex:form>
</apex:page>